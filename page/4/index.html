<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.misaka-xxw.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.22.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":{"gitalk":{"order":-1}},"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="Misaka-xxw的博客">
<meta property="og:url" content="http://www.misaka-xxw.github.io/page/4/index.html">
<meta property="og:site_name" content="Misaka-xxw的博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Misaka-xxw">
<meta property="article:tag" content="C,Cpp,Python,数据结构与算法,Unity,单片机,Ps,Pr,Ae">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://www.misaka-xxw.github.io/page/4/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/4/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Misaka-xxw的博客</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Misaka-xxw的博客</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">昨日种种，皆成今我</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/archives/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Misaka-xxw</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">39</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">42</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.misaka-xxw.github.io/2025/01/01/assembly_exam_note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Misaka-xxw">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Misaka-xxw的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Misaka-xxw的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/01/01/assembly_exam_note/" class="post-title-link" itemprop="url">汇编语言期末笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-01-01 19:29:07" itemprop="dateCreated datePublished" datetime="2025-01-01T19:29:07+08:00">2025-01-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-21 14:35:36" itemprop="dateModified" datetime="2025-01-21T14:35:36+08:00">2025-01-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%B1%87%E7%BC%96/" itemprop="url" rel="index"><span itemprop="name">汇编</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.5k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>17 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <style>
h6 {
    background-color: pink;
}
h1 {
    text-align: center;
}
</style>

<hr>
<h1 id="计科期末考试出题"><a href="#计科期末考试出题" class="headerlink" title="计科期末考试出题"></a>计科期末考试出题</h1><ol>
<li>读程序题</li>
<li>程序填空题</li>
<li>写程序题：计算</li>
<li>写程序题：循环分支</li>
<li>写程序题：中断</li>
</ol>
<hr>
<h1 id="第3章-80x86的指令系统和寻址方式"><a href="#第3章-80x86的指令系统和寻址方式" class="headerlink" title="第3章 80x86的指令系统和寻址方式"></a>第3章 80x86的指令系统和寻址方式</h1><h2 id="80x86的寻址方式"><a href="#80x86的寻址方式" class="headerlink" title="80x86的寻址方式"></a>80x86的寻址方式</h2><p>…</p>
<hr>
<h2 id="80x86的指令系统"><a href="#80x86的指令系统" class="headerlink" title="80x86的指令系统"></a>80x86的指令系统</h2><h3 id="数据传送指令-p47"><a href="#数据传送指令-p47" class="headerlink" title="数据传送指令(p47)"></a>数据传送指令(p47)</h3><h4 id="通用数据传送指令"><a href="#通用数据传送指令" class="headerlink" title="通用数据传送指令"></a>通用数据传送指令</h4><h5 id="mov"><a href="#mov" class="headerlink" title="mov"></a>mov</h5><ol>
<li>mov mem/reg1,mem/reg2<br><span style="color:red">先略。。。直接看书</span></li>
</ol>
<h5 id="push进栈指令"><a href="#push进栈指令" class="headerlink" title="push进栈指令"></a>push进栈指令</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">push src</span><br></pre></td></tr></table></figure>
<p>(sp) ← (sp)-2<br>((sp)+1,(sp)) ← (src)</p>
<p><strong>格式</strong></p>
<p>push reg<br>push mem<br><del>push data</del>8086不行<br>push segreg</p>
<details>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">push ax      ; 推送 AX 寄存器</span><br><span class="line">push bx      ; 推送 BX 寄存器</span><br><span class="line">push cx      ; 推送 CX 寄存器</span><br><span class="line">push dx      ; 推送 DX 寄存器</span><br><span class="line">push sp      ; 推送 SP 寄存器</span><br><span class="line">push bp      ; 推送 BP 寄存器</span><br><span class="line">push si      ; 推送 SI 寄存器</span><br><span class="line">push di      ; 推送 DI 寄存器</span><br><span class="line"></span><br><span class="line">push word ptr [address]  ; 推送内存地址中的值</span><br><span class="line"></span><br><span class="line">push cs      ; 推送 CS 段寄存器</span><br><span class="line">push ds      ; 推送 DS 段寄存器</span><br><span class="line">push es      ; 推送 ES 段寄存器</span><br><span class="line">push ss      ; 推送 SS 段寄存器</span><br></pre></td></tr></table></figure>

</details>

<h5 id="pop出栈指令"><a href="#pop出栈指令" class="headerlink" title="pop出栈指令"></a>pop出栈指令</h5><p><span style="color:red">注意要画栈图</span></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pop dst</span><br></pre></td></tr></table></figure>
<p>(dst) ← ((sp)+1,(sp))<br>(sp) ← (sp)+2</p>
<p>pop reg<br>pop mem<br><del>pop data</del>8086不行<br>pop segreg</p>
<h4 id="累加器专用传送指令"><a href="#累加器专用传送指令" class="headerlink" title="累加器专用传送指令"></a>累加器专用传送指令</h4><p>这些指令不影响标志位</p>
<h5 id="in"><a href="#in" class="headerlink" title="in"></a>in</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">in al,port ;字节, (al) ← (port)</span><br><span class="line">in ax,port ;字, (ax) ← (port+1,port)</span><br><span class="line">in al,dx   ;字节, (al) ← ((dx))</span><br><span class="line">in ax,dx   ;字, (ax) ← ((dx)+1,(dx))</span><br></pre></td></tr></table></figure>
<h5 id="out"><a href="#out" class="headerlink" title="out"></a>out</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">out port,al ;字节, port ← (al)</span><br><span class="line">out port,ax ;字, (port+1,port) ← (ax)</span><br><span class="line">out dx,al   ;字节, ((dx)) ← (al)</span><br><span class="line">out dx,ax   ;字, ((dx)+1,(dx)) ← (ax)</span><br></pre></td></tr></table></figure>
<h5 id="xlat换码指令"><a href="#xlat换码指令" class="headerlink" title="xlat换码指令"></a>xlat换码指令</h5><p>al=[bx+al]</p>
<h4 id="地址传送指令"><a href="#地址传送指令" class="headerlink" title="地址传送指令"></a>地址传送指令</h4><h5 id="lea有效地址送寄存器"><a href="#lea有效地址送寄存器" class="headerlink" title="lea有效地址送寄存器"></a>lea有效地址送寄存器</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lea reg,sec ;(reg)&lt;-src</span><br></pre></td></tr></table></figure>
<p>异同：<code>lea bx,list</code> ≈ <code>mov bx,offset list</code>, <code>mov</code>更快</p>
<h5 id="lds-les-lfs-lgs-lss指针送寄存器和-s"><a href="#lds-les-lfs-lgs-lss指针送寄存器和-s" class="headerlink" title="lds, les, lfs, lgs, lss指针送寄存器和?s"></a>lds, les, lfs, lgs, lss指针送寄存器和?s</h5><p>p56, 实验暂时不用</p>
<h5 id="标志寄存器传送指令"><a href="#标志寄存器传送指令" class="headerlink" title="标志寄存器传送指令"></a>标志寄存器传送指令</h5><p>p57, 实验暂时不用</p>
<h4 id="类型转换指令"><a href="#类型转换指令" class="headerlink" title="类型转换指令"></a>类型转换指令</h4><h5 id="cbw"><a href="#cbw" class="headerlink" title="cbw"></a>cbw</h5><p>将al的内容符号扩展到ah，形成ax的字。<br>若(AL)的最高有效位为0，则(AH)= 00H<br>若(AL)的最高有效位为1，则(AH)= 0FFH</p>
<h5 id="cwd-cwde"><a href="#cwd-cwde" class="headerlink" title="cwd/cwde"></a>cwd/cwde</h5><p>将ax的内容符号扩展到dx，形成dx:ax中的双字。<br>若(AX)的最高有效位为0，则(DX) = 0000H<br>若(AX)的最高有效位为1，则(DX) = 0FFFFH</p>
<hr>
<h3 id="算术指令"><a href="#算术指令" class="headerlink" title="算术指令"></a>算术指令</h3><h4 id="加法指令"><a href="#加法指令" class="headerlink" title="加法指令"></a>加法指令</h4><h5 id="add加法"><a href="#add加法" class="headerlink" title="add加法"></a>add加法</h5><h5 id="adc带进位加法"><a href="#adc带进位加法" class="headerlink" title="adc带进位加法"></a>adc带进位加法</h5><h5 id="inc-加1指令"><a href="#inc-加1指令" class="headerlink" title="inc 加1指令"></a>inc 加1指令</h5><h4 id="减法指令"><a href="#减法指令" class="headerlink" title="减法指令"></a>减法指令</h4><h5 id="sub减法"><a href="#sub减法" class="headerlink" title="sub减法"></a>sub减法</h5><h5 id="sbb带借位减法"><a href="#sbb带借位减法" class="headerlink" title="sbb带借位减法"></a>sbb带借位减法</h5><h5 id="dec减1"><a href="#dec减1" class="headerlink" title="dec减1"></a>dec减1</h5><h5 id="neg求补"><a href="#neg求补" class="headerlink" title="neg求补"></a>neg求补</h5><p>按位求反+1</p>
<h5 id="cmp比较"><a href="#cmp比较" class="headerlink" title="cmp比较"></a>cmp比较</h5><p>前操作数-后操作数，但是不保存结果，只设置条件标志位</p>
<h4 id="乘法指令"><a href="#乘法指令" class="headerlink" title="乘法指令"></a>乘法指令</h4><p>目的操作数必须是累加器</p>
<h5 id="mul无符号数乘法"><a href="#mul无符号数乘法" class="headerlink" title="mul无符号数乘法"></a>mul无符号数乘法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mul src</span><br></pre></td></tr></table></figure>
<p>(ax)&lt;-(al)<em>(src)    ;字节操作数<br>(dx,ax)&lt;-(ax)</em>(src) ;字操作数</p>
<h5 id="imul带符号数乘法"><a href="#imul带符号数乘法" class="headerlink" title="imul带符号数乘法"></a>imul带符号数乘法</h5><p>同上，但是是带符号数</p>
<h4 id="除法指令"><a href="#除法指令" class="headerlink" title="除法指令"></a>除法指令</h4><h5 id="div无符号数除法"><a href="#div无符号数除法" class="headerlink" title="div无符号数除法"></a>div无符号数除法</h5><p><code>div src</code></p>
<p>字节操作：<br>(ax)/(src)=(al)……(ah)<br>字操作：<br>(dx,ax)/(src)=(ax)……(dx)<br><span style="color:red">注意进制转换的代码</span></p>
<h5 id="idiv带符号数除法"><a href="#idiv带符号数除法" class="headerlink" title="idiv带符号数除法"></a>idiv带符号数除法</h5><p>同上</p>
<h4 id="十进制调整指令"><a href="#十进制调整指令" class="headerlink" title="十进制调整指令"></a>十进制调整指令</h4><p>有压缩的BCD码调整指令：<br>DAA 加法的十进制调整指令<br>DAS 减法的十进制调整指令</p>
<p>非压缩的BCD码调整指令：<br>AAA 加法的ASCII调整指令<br>AAS 减法的ASCII调整指令<br>AAM 乘法的ASCII调整指令<br>AAD 除法的ASCII调整指令</p>
<h3 id="逻辑指令"><a href="#逻辑指令" class="headerlink" title="逻辑指令"></a>逻辑指令</h3><h4 id="逻辑运算指令"><a href="#逻辑运算指令" class="headerlink" title="逻辑运算指令"></a>逻辑运算指令</h4><h5 id="and-逻辑与指令"><a href="#and-逻辑与指令" class="headerlink" title="and 逻辑与指令"></a>and 逻辑与指令</h5><h5 id="or-逻辑或指令"><a href="#or-逻辑或指令" class="headerlink" title="or 逻辑或指令"></a>or 逻辑或指令</h5><h5 id="not-逻辑非指令"><a href="#not-逻辑非指令" class="headerlink" title="not 逻辑非指令"></a>not 逻辑非指令</h5><h5 id="xor-异或指令"><a href="#xor-异或指令" class="headerlink" title="xor 异或指令"></a>xor 异或指令</h5><p>要使操作数的某些位变反，使用xor，那些位设为1</p>
<h5 id="test-测试指令"><a href="#test-测试指令" class="headerlink" title="test 测试指令"></a>test 测试指令</h5><p>做and运算，但是不保存结果，只置条件码<br>要测试操作数的某位是都为1，可以先将操作数取反，再用test测试。</p>
<h4 id="移位指令-p73"><a href="#移位指令-p73" class="headerlink" title="移位指令(p73)"></a>移位指令(p73)</h4><p>e.g. <code>shl opr,cnt</code><br>在8086中，<code>cnt</code>可以是<code>cl</code>或者<code>1</code></p>
<h5 id="shl-逻辑左移指令"><a href="#shl-逻辑左移指令" class="headerlink" title="shl 逻辑左移指令"></a>shl 逻辑左移指令</h5><p>无符号数乘法</p>
<h5 id="sal-算数左移指令"><a href="#sal-算数左移指令" class="headerlink" title="sal 算数左移指令"></a>sal 算数左移指令</h5><p>有符号数乘法</p>
<h5 id="shr-逻辑右移指令"><a href="#shr-逻辑右移指令" class="headerlink" title="shr 逻辑右移指令"></a>shr 逻辑右移指令</h5><p>无符号数除法</p>
<h5 id="sal-算数右移指令"><a href="#sal-算数右移指令" class="headerlink" title="sal 算数右移指令"></a>sal 算数右移指令</h5><p>有符号数除法</p>
<h5 id="rol-循环左移指令"><a href="#rol-循环左移指令" class="headerlink" title="rol 循环左移指令"></a>rol 循环左移指令</h5><h5 id="ror-循环右移指令"><a href="#ror-循环右移指令" class="headerlink" title="ror 循环右移指令"></a>ror 循环右移指令</h5><h5 id="rcl-带进位循环左移指令"><a href="#rcl-带进位循环左移指令" class="headerlink" title="rcl 带进位循环左移指令"></a>rcl 带进位循环左移指令</h5><h5 id="rcr-带进位循环右移指令"><a href="#rcr-带进位循环右移指令" class="headerlink" title="rcr 带进位循环右移指令"></a>rcr 带进位循环右移指令</h5><h3 id="串处理指令"><a href="#串处理指令" class="headerlink" title="串处理指令"></a>串处理指令</h3><p><span style="color:red">这里要写一下字符串代码</span></p>
<h4 id="与rep相配合工作的movs-stos-lods-ins-outs"><a href="#与rep相配合工作的movs-stos-lods-ins-outs" class="headerlink" title="与rep相配合工作的movs, stos, lods, ins, outs"></a>与rep相配合工作的movs, stos, lods, ins, outs</h4><h5 id="rep重复串操作"><a href="#rep重复串操作" class="headerlink" title="rep重复串操作"></a>rep重复串操作</h5><p>重复串操作直到计数器Count Reg的内容为0位为止<br>操作：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> Count_Reg != <span class="number">0</span>:</span><br><span class="line">    Count_Reg-=<span class="number">1</span></span><br><span class="line">    执行后面的串指令</span><br></pre></td></tr></table></figure>
<h5 id="movs-串传送指令"><a href="#movs-串传送指令" class="headerlink" title="movs 串传送指令"></a>movs 串传送指令</h5><p>格式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">movs dst,src</span><br><span class="line">movsb ;字节</span><br><span class="line">movsw ;字</span><br></pre></td></tr></table></figure>
<p>第一种格式要在操作数里标名是字还是字节操作。<br><code>movs  es:byte ptr[di],ds:[si]</code></p>
<p><strong>相当于<code>strcpy</code></strong><br>movs可以把由<strong>源变址寄存器</strong>指向的数据段中的一个字（或字节），传到<strong>目的变址寄存器</strong>指向的附加段中的一个字（或字节）去，同时根据<strong>方向标志</strong>以及数据格式（字or字节），对源变址寄存器和目的变址寄存器进行修改。</p>
<p>执行操作：</p>
<ol>
<li>((DI)) ← ((SI))</li>
<li>字节操作：(SI)←(SI)±1,  (DI)←(DI)±1<br>字操作：  (SI)←(SI)±2,  (DI)←(DI)±2<br>方向标志DF=0时用 +，DF=1时用 - 。</li>
</ol>
<p>执行REP MOVS之前，应先做好：</p>
<ol>
<li>源串首地址（末地址）→ SI</li>
<li>目的串首地址（末地址）→ DI</li>
<li>串长度 → CX</li>
<li>建立方向标志（CLD使DF=0，STD使DF=1）</li>
</ol>
<p><mark><strong>方向标志</strong></mark></p>
<ul>
<li><code>cld</code>: df=0, 地址自动增量</li>
<li><code>std</code>: df=1, 地址自动减量</li>
</ul>
<h5 id="stos-存入串指令"><a href="#stos-存入串指令" class="headerlink" title="stos 存入串指令"></a>stos 存入串指令</h5><p>格式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">stos dst</span><br><span class="line">stosb ;字节</span><br><span class="line">stosw ;字</span><br></pre></td></tr></table></figure>
<p><strong>相当于<code>memset</code></strong><br>将al、ax的内容存入由<strong>目的变址寄存器</strong>指向的附加段的某单元中，并根据……<br><strong>初始化某一个缓冲区</strong>时很有用</p>
<p>执行操作：</p>
<ol>
<li>字节操作：((DI))←(AL),  (DI)←(DI)±1</li>
<li>字操作：((DI))←(AX),  (DI)←(DI)±2</li>
</ol>
<p>例：把附加段中的5个字节缓冲区置为20H</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lea  di, mess2</span><br><span class="line">mov  al, 20H</span><br><span class="line">mov  cx, 5</span><br><span class="line">cld</span><br><span class="line">rep  stosb</span><br></pre></td></tr></table></figure>
<h4 id="lods-从串取指令"><a href="#lods-从串取指令" class="headerlink" title="lods 从串取指令"></a>lods 从串取指令</h4><p>格式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lods src</span><br><span class="line">lodsb ;字节</span><br><span class="line">lodsw ;字</span><br></pre></td></tr></table></figure>
<p>LODS指令一般不与REP联用<br>源串必须在数据段中，目的串必须在附加段中，<br>但源串允许使用段跨越前缀来修改。<br>不影响条件标志位</p>
<p>执行操作：<br>字节操作：(AL)←((SI)),(SI)←(SI)±1<br>字操作：(AX)←((SI)),(SI)←(SI)±2</p>
<h4 id="ins-串输入"><a href="#ins-串输入" class="headerlink" title="ins 串输入"></a>ins 串输入</h4><p>格式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ins dst,dx</span><br><span class="line">insb ;字节</span><br><span class="line">insw ;字</span><br></pre></td></tr></table></figure>
<p>执行操作：<br>字节操作：(DI)←((DX)), (DI)←(DI)±1<br>字操作：(DI+1,DI)←((DX)), (DI)←(DI)±2</p>
<h4 id="outs-串输出"><a href="#outs-串输出" class="headerlink" title="outs 串输出"></a>outs 串输出</h4><p>格式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">outs dx,src</span><br><span class="line">outsb ;字节</span><br><span class="line">outsw ;字</span><br></pre></td></tr></table></figure>
<p>执行操作：<br>字节操作：((DX)) ← (SI),  (SI)←(SI)±1<br>字操作：((DX)) ←(SI+1，SI),  (SI)←(SI)±2</p>
<h4 id="repe-repz-repne-repnz-cmps-scas"><a href="#repe-repz-repne-repnz-cmps-scas" class="headerlink" title="repe/repz,repne/repnz,cmps,scas"></a>repe/repz,repne/repnz,cmps,scas</h4><h5 id="repe-repz-为相等-为零时重复串操作"><a href="#repe-repz-为相等-为零时重复串操作" class="headerlink" title="repe/repz 为相等/为零时重复串操作"></a>repe/repz 为相等/为零时重复串操作</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> Count_Reg!=<span class="number">0</span> <span class="keyword">and</span> zf!=<span class="number">0</span>:</span><br><span class="line">    Count_Reg-=<span class="number">1</span></span><br><span class="line">    执行其后的串指令</span><br></pre></td></tr></table></figure>
<h5 id="repne-repnz-为不相等-不为零时重复串操作"><a href="#repne-repnz-为不相等-不为零时重复串操作" class="headerlink" title="repne/repnz 为不相等/不为零时重复串操作"></a>repne/repnz 为不相等/不为零时重复串操作</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> Count_Reg!=<span class="number">0</span> <span class="keyword">and</span> zf!=<span class="number">1</span>:</span><br><span class="line">    Count_Reg-=<span class="number">1</span></span><br><span class="line">    执行其后的串指令</span><br></pre></td></tr></table></figure>
<h5 id="cmps-串比较指令"><a href="#cmps-串比较指令" class="headerlink" title="cmps 串比较指令"></a>cmps 串比较指令</h5><p>格式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cmps src,dst</span><br><span class="line">cmpsb ;字节</span><br><span class="line">cmpsw ;字</span><br></pre></td></tr></table></figure>
<p><strong>相当于<code>strcmp</code></strong></p>
<p>执行操作：<br>(1) ((SI)) - ((DI))<br>根据比较结果设置条件标志位：相等 ZF=1<br>(2) 字节操作：(SI)←(SI)±1,  (DI)←(DI)±1<br>字操作：(SI)←(SI)±2,  (DI)←(DI)±2</p>
<h5 id="scas串扫描指令"><a href="#scas串扫描指令" class="headerlink" title="scas串扫描指令"></a>scas串扫描指令</h5><p>格式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scas dst</span><br><span class="line">scasb ;字节</span><br><span class="line">scasw ;字</span><br></pre></td></tr></table></figure>
<p>执行操作：<br>字节操作：(AL) - ((DI)),  (DI)←(DI)±1<br>字操作：(AX) - ((DI)),  (DI)←(DI)±2</p>
<h3 id="控制转移指令"><a href="#控制转移指令" class="headerlink" title="控制转移指令"></a>控制转移指令</h3><p><span>后面再看</span></p>
<h4 id="无条件转移指令"><a href="#无条件转移指令" class="headerlink" title="无条件转移指令"></a>无条件转移指令</h4><p>jmp</p>
<h4 id="条件转移指令-p89"><a href="#条件转移指令-p89" class="headerlink" title="条件转移指令(p89)"></a>条件转移指令(p89)</h4><p>jz/je<br>jnz<br>js<br>jns<br>jo<br>jno<br>jp/jpe<br>jnp/jpo<br>jb/jnae<br>jnb/jae/jnc</p>
<h4 id="循环指令"><a href="#循环指令" class="headerlink" title="循环指令"></a>循环指令</h4><h5 id="loop"><a href="#loop" class="headerlink" title="loop"></a>loop</h5><p>Count_Reg!=0</p>
<h5 id="loopz-loope"><a href="#loopz-loope" class="headerlink" title="loopz/loope"></a>loopz/loope</h5><p>Count_Reg!=0 &amp;&amp; zf=1</p>
<h5 id="loopnz-loopne"><a href="#loopnz-loopne" class="headerlink" title="loopnz/loopne"></a>loopnz/loopne</h5><p>Count_Reg!=0 &amp;&amp; zf=0</p>
<h4 id="子程序"><a href="#子程序" class="headerlink" title="子程序"></a>子程序</h4><h5 id="call"><a href="#call" class="headerlink" title="call"></a>call</h5><h5 id="ret"><a href="#ret" class="headerlink" title="ret"></a>ret</h5><h1 id="第8章-输入输出程序设计"><a href="#第8章-输入输出程序设计" class="headerlink" title="第8章 输入输出程序设计"></a>第8章 输入输出程序设计</h1><p>（面向考试复习）</p>
<h2 id="程序直接控制I-O方式-p283"><a href="#程序直接控制I-O方式-p283" class="headerlink" title="程序直接控制I/O方式(p283)"></a>程序直接控制I/O方式(p283)</h2><h3 id="I-O指令-p284"><a href="#I-O指令-p284" class="headerlink" title="I/O指令(p284)"></a>I/O指令(p284)</h3><p><strong>in和out</strong></p>
<p>in 完成I/O -&gt; CPU的信息传送<br>out完成CPU -&gt; I/O的信息传送</p>
<p>0~0ffh，即0~255端口可以这样写：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">;port是端口地址，一个8位的立即数</span><br><span class="line">in al,port   ;(al)&lt;-(port)</span><br><span class="line">in ax,port   ;(ax)&lt;-(port+1,port)</span><br><span class="line"></span><br><span class="line">out port,al  ;(port)&lt;-(al)</span><br><span class="line">out port,ax  ;(port+1,port)&lt;-(ax)</span><br></pre></td></tr></table></figure>
<p>0~0ffffh，即0~255端口可以这样写（当端口&gt;0ffh时，必须这样写！）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">;dx里存了端口地址</span><br><span class="line">in al,dx   ;(al)&lt;-((dx))</span><br><span class="line">in ax,dx   ;(ax)&lt;-((dx)+1,(dx))</span><br><span class="line"></span><br><span class="line">out dx,al  ;((dx))&lt;-(al)</span><br><span class="line">out dx,ax  ;((dx)+1,(dx))&lt;-(ax)</span><br></pre></td></tr></table></figure>
<p><span style="color:red">注意端口是否带“h”，例如126h是大于十进制的255的，就得用dx</span></p>
<p><strong>用法示例</strong></p>
<ol>
<li><p>把一个字，从端口地址28和29，传到存储器的字单元data_word中</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">in  ax,28h</span><br><span class="line">mov data_word,ax</span><br></pre></td></tr></table></figure>
</li>
<li><p>检测端口地址27h的第2位是否为1，如果1就是转到错误处理<br> 注意这里的第几位是从右到左从<span style="color:red">0</span>数起<br> 因为<code>test</code>就是只改变flags的and，所以用来查1</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">in   al,27h</span><br><span class="line">test al,00000100b</span><br><span class="line">jnz  error</span><br></pre></td></tr></table></figure>
</li>
<li><p>将端口地址为126h的命令寄存器，第7位置1</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mov dx,126h</span><br><span class="line">in  al,dx</span><br><span class="line">or  al,80h  ;80h=10000000b</span><br><span class="line">out dx,al</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="中断传送方式"><a href="#中断传送方式" class="headerlink" title="中断传送方式"></a>中断传送方式</h2><h3 id="8086的中断分类-p290"><a href="#8086的中断分类-p290" class="headerlink" title="8086的中断分类(p290)"></a>8086的中断分类(p290)</h3><p><strong>中断标志位if</strong></p>
<p>设置中断允许位(if=1)<code>sti</code> set interupt flag<br>清除中断允许位(if=0)<code>cli</code> clear interupt flag</p>
<p><strong>中断屏蔽寄存器（端口21h）</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>0</th>
</tr>
</thead>
<tbody>
<tr>
<td>打印机</td>
<td>软盘</td>
<td>硬盘</td>
<td>串行通信口1</td>
<td>串行通信口2</td>
<td>保留</td>
<td>键盘</td>
<td>定时器</td>
</tr>
</tbody>
</table>
</div>
<p><strong>中断屏蔽寄存器（端口20h）</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>0</th>
</tr>
</thead>
<tbody>
<tr>
<td>R</td>
<td>SL</td>
<td>EOI</td>
<td>0</td>
<td>0</td>
<td>L2</td>
<td>L1</td>
<td>L0</td>
</tr>
</tbody>
</table>
</div>
<p>扩充(实验书p92)：</p>
<p><strong>键盘的输入寄存器（PA，端口60h）</strong></p>
<table>
<tr>
<td>PB位7</td>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>0</th>
</tr>

<tr>
<td>PB7=1</td>
<td colspan="2">磁盘驱动器数</td>
<td colspan="2">显示器类型</td>
<td colspan="2">系统板上RAM数</td>
<td>未用</td>
<td>非磁盘系统</td>
</tr>
<tr>
<td>PB7=0</td>
<td colspan="8">键盘扫描码</td>
</tr>
</table>

<p><strong>控制寄存器（PB，端口61h）</strong></p>
<table>
<tr>
<tr><th>7</th>
<td>PA选源，1=键盘应答</td></tr>
<tr><th>6</th>
<td>0=禁止键盘时钟</td></tr>
<tr><th>5</th>
<td>0=允许由扩充槽的错误信号</td></tr>
<tr><th>4</th>
<td>0=允许ram</td></tr>
<tr><th>3</th>
<td>0=启开盒式带马达</td></tr>
<tr><th>2</th>
<td>PC0~3选源</td></tr>
<tr><th>1</th>
<td><span style="color:red">扬声器脉冲门</span></td></tr>
<tr><th>0</th>
<td><span style="color:red">定时器2与门</span></td></tr>
</table>

<p><strong>1ch中断一秒钟约产生18次中断，具体使用可以看2324期末卷最后一题</strong></p>
<h3 id="中断向量表-p293"><a href="#中断向量表-p293" class="headerlink" title="中断向量表(p293)"></a>中断向量表(p293)</h3><div class="table-container">
<table>
<thead>
<tr>
<th>功能</th>
<th>预置</th>
<th>执行</th>
<th>返回</th>
</tr>
</thead>
<tbody>
<tr>
<td>设置中断向量</td>
<td>ah=25h<br/>al=中断类型号<br/>ds:dx=中断向量</td>
<td>int 21h</td>
<td></td>
</tr>
<tr>
<td>取中断向量</td>
<td>ah=35h<br/>al=中断类型号</td>
<td>int 21h</td>
<td>es:bx=中断向量</td>
</tr>
</tbody>
</table>
</div>
<p>中断操作：</p>
<ol>
<li>取中断类型号</li>
<li>计算中断向量地址</li>
<li>取中断向量，偏移地址送IP，段地址送CS</li>
<li>转入中断处理程序</li>
<li>中断返回到int的下一条指令</li>
</ol>
<p><strong>使用dos功能调用存取中断向量，模板</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">;保存原来的中断向量</span><br><span class="line">mov  al,n   ;中断类型号</span><br><span class="line">mov  ah,35h ;取中断向量到es:bx</span><br><span class="line">int  21h</span><br><span class="line">push es</span><br><span class="line">push bx</span><br><span class="line">;设置新的中断向量</span><br><span class="line">push ds</span><br><span class="line">mov  ax,seg myfunc</span><br><span class="line">mov  ds,ax</span><br><span class="line">mov  dx,offset myfunc</span><br><span class="line">mov  al,n</span><br><span class="line">mov  al,25h</span><br><span class="line">int  21h</span><br><span class="line">pop  ds</span><br><span class="line">;重新设置原来的中断向量</span><br><span class="line">pop  dx    ;原来的bx</span><br><span class="line">pop  ds    ;原来的es</span><br><span class="line">mov  al,n</span><br><span class="line">mov  ah,25h</span><br><span class="line">int  21h</span><br><span class="line">ret</span><br><span class="line">;...</span><br><span class="line">myfunc proc near</span><br><span class="line">    ;...</span><br><span class="line">    iret</span><br><span class="line">myfunc endp</span><br><span class="line">;...</span><br></pre></td></tr></table></figure>
<p><span style="color:red">p300的程序可能会被改成考试题</span></p>
<h4 id="p301响铃程序"><a href="#p301响铃程序" class="headerlink" title="p301响铃程序"></a>p301响铃程序</h4><p>只有铃响：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">        mov    dx, 100h</span><br><span class="line">        in     al, 61h</span><br><span class="line">        and    al, 11111100b</span><br><span class="line">sound:  xor    al, 2</span><br><span class="line">        out    61h, al</span><br><span class="line">        mov    cx, 140h</span><br><span class="line">wait1:  loop   wait1</span><br><span class="line">        dec    dx</span><br><span class="line">        jne    sound</span><br></pre></td></tr></table></figure>
<p>完整程序：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">datarea segment</span><br><span class="line">    count   dw 1</span><br><span class="line">    msg     db &#x27;The bell is ringing&#x27;,0dh,0ah,&#x27;$&#x27;</span><br><span class="line">datarea ends</span><br><span class="line">prognam segment</span><br><span class="line">main proc far</span><br><span class="line">            assume cs:prognam,ds:datarea,es:datarea</span><br><span class="line">    start:  </span><br><span class="line">            push   ds</span><br><span class="line">            sub    ax,ax</span><br><span class="line">            push   ax</span><br><span class="line">            mov    ax,datarea</span><br><span class="line">            mov    ds,ax</span><br><span class="line">            mov    es,ax</span><br><span class="line"></span><br><span class="line">    ;保存旧的中断向量</span><br><span class="line">            mov    al,1ch                              ;1ch中断</span><br><span class="line">            mov    ah,35h                              ;取中断向量，保存在es:bx里</span><br><span class="line">            int    21h</span><br><span class="line">            push   bx</span><br><span class="line">            push   es</span><br><span class="line"></span><br><span class="line">    ;设置新的中断向量</span><br><span class="line">            push   ds</span><br><span class="line">            mov    dx,offset ring                      ;ring的偏移地址</span><br><span class="line">            mov    ax,seg ring                         ;ring的段地址</span><br><span class="line">            mov    ds,ax                               ;ds:dx=段地址:偏移地址</span><br><span class="line">            mov    al,1ch                              ;1ch中断</span><br><span class="line">            mov    ah,25h                              ;设置中断向量</span><br><span class="line">            int    21h</span><br><span class="line">            pop    ds</span><br><span class="line"></span><br><span class="line">    ;将21h端口的第0位清零,即打开定时器</span><br><span class="line">            in     al,21h</span><br><span class="line">            and    al,11111110b</span><br><span class="line">            out    21h,al</span><br><span class="line">            sti                                        ;设置中断标志，允许中断。</span><br><span class="line"></span><br><span class="line">    ;循环20000*30000次，因为次数太多一个寄存器装不下</span><br><span class="line">            mov    di,20000</span><br><span class="line">    delay:  </span><br><span class="line">            mov    si,30000</span><br><span class="line">    delay1: </span><br><span class="line">            dec    si</span><br><span class="line">            jnz    delay1</span><br><span class="line">            dec    di</span><br><span class="line">            jnz    delay</span><br><span class="line"></span><br><span class="line">    ;重新设置回旧的中断向量</span><br><span class="line">            pop    dx</span><br><span class="line">            pop    ds</span><br><span class="line">            mov    al,1ch</span><br><span class="line">            mov    ah,25h</span><br><span class="line">            int    21h</span><br><span class="line">            ret</span><br><span class="line">main endp</span><br><span class="line">ring proc near</span><br><span class="line">            push   ds</span><br><span class="line">            push   ax</span><br><span class="line">            push   cx</span><br><span class="line">            push   dx</span><br><span class="line"></span><br><span class="line">            mov    ax,datarea</span><br><span class="line">            mov    ds,ax</span><br><span class="line">            sti</span><br><span class="line"></span><br><span class="line">            dec    count</span><br><span class="line">            jnz    exit</span><br><span class="line">    ;打印消息&#x27;The bell is ringing&#x27;</span><br><span class="line">            mov    dx,offset msg</span><br><span class="line">            mov    ah,09h</span><br><span class="line">            int    21h</span><br><span class="line"></span><br><span class="line">            mov    dx,100                              ;打开关闭的次数</span><br><span class="line">            in     al,61h</span><br><span class="line">            and    al,0fch                             ;61h端口的第0、1位清0，分别是定时器2和扬声器脉冲门</span><br><span class="line">    sound:  </span><br><span class="line">            xor    al,02                               ;61h端口的第1位转置，扬声器脉冲门</span><br><span class="line">            out    61h,al</span><br><span class="line"></span><br><span class="line">    ;等待，因为cpu比端口快的多</span><br><span class="line">            mov    cx,1400h</span><br><span class="line">    wait1:  </span><br><span class="line">            loop   wait1</span><br><span class="line">            </span><br><span class="line">            dec    dx</span><br><span class="line">            jne    sound</span><br><span class="line">            mov    count,182                           ;10s的铃响delay</span><br><span class="line">    exit:   </span><br><span class="line">            cli</span><br><span class="line">            pop    dx</span><br><span class="line">            pop    cx</span><br><span class="line">            pop    ax</span><br><span class="line">            pop    ds</span><br><span class="line">            iret</span><br><span class="line">ring endp</span><br><span class="line">prognam ends</span><br><span class="line">    end start</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="堆栈情况"><a href="#堆栈情况" class="headerlink" title="堆栈情况"></a>堆栈情况</h1><p><img src="push_ds.png" alt="alt text"><br>堆栈段（SS）没有变化，始终保持为 076B。<br>堆栈指针（SP）在每次执行PUSH指令后减少2，这是因为每次PUSH操作都会将一个寄存器的值（2 字节）压入堆栈。</p>
<ol>
<li>一开始，sp初始化为0</li>
<li>push ds后，sp=0000h-2=0fffeh，压入ds=075Ch</li>
<li>sub ax,ax后，ax=0</li>
<li>push ax后，sp=0fffeh-2=0fffch，压入ax=0</li>
</ol>
<hr>
<h1 id="附录-DOS系统功能调用（常用）"><a href="#附录-DOS系统功能调用（常用）" class="headerlink" title="附录 DOS系统功能调用（常用）"></a>附录 DOS系统功能调用（常用）</h1><div class="table-container">
<table>
<thead>
<tr>
<th>AH</th>
<th>功能</th>
<th>调用参数</th>
<th>返回参数</th>
</tr>
</thead>
<tbody>
<tr>
<td>00</td>
<td>程序终止</td>
<td>CS=程序段前缀PSP</td>
<td></td>
</tr>
<tr>
<td>01</td>
<td>键盘输入并回显</td>
<td></td>
<td>AL=输入字符</td>
</tr>
<tr>
<td>02</td>
<td>显示输出</td>
<td>DL=输出字符</td>
<td></td>
</tr>
<tr>
<td>09</td>
<td>显示字符串</td>
<td>DS:DX=串地址 字符串以’$’结尾</td>
<td></td>
</tr>
<tr>
<td>0A</td>
<td>键盘输入到缓冲区</td>
<td>DS:DX=缓冲区首址 (DS:DX)=缓冲区最大字符数</td>
<td>(DS:DX+1)=实际输入的字符数</td>
</tr>
<tr>
<td>25</td>
<td>设置中断向量</td>
<td>DS：DX=中断向量<br>AL=中断类型号</td>
<td></td>
</tr>
<tr>
<td>35</td>
<td>取中断向量</td>
<td>AL=中断类型号</td>
<td>ES：BX=中断向量</td>
</tr>
</tbody>
</table>
</div>
<hr>
<h1 id="常用debug-实验书p186"><a href="#常用debug-实验书p186" class="headerlink" title="常用debug(实验书p186)"></a>常用debug(实验书p186)</h1><ul>
<li><code>-d</code>: 显示内存单元内容</li>
<li><code>-r</code>: 寄存器和标志位状态</li>
<li><code>-g</code>: 运行</li>
<li><code>-t</code>: 单步运行</li>
<li><code>-u</code>: 反汇编</li>
<li><code>-q</code>: 退出</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>标志名</th>
<th>置位</th>
<th>复位</th>
</tr>
</thead>
<tbody>
<tr>
<td>溢出Overflow</td>
<td>是OV</td>
<td>否NV</td>
</tr>
<tr>
<td>方向Direction</td>
<td>减量DN</td>
<td>增量UP</td>
</tr>
<tr>
<td>中断Interrupt</td>
<td>允许EI</td>
<td>屏蔽DI</td>
</tr>
<tr>
<td>符号Sign</td>
<td>负NG</td>
<td>正PL</td>
</tr>
<tr>
<td>零Zero</td>
<td>是ZR</td>
<td>否NZ</td>
</tr>
<tr>
<td>辅助进位Auxiliary Carry</td>
<td>是AC</td>
<td>否NA</td>
</tr>
<tr>
<td>奇偶Parity</td>
<td>偶PE</td>
<td>奇PO</td>
</tr>
<tr>
<td>进位Carry</td>
<td>是CY</td>
<td>否NC</td>
</tr>
</tbody>
</table>
</div>
<hr>
<h1 id="实验代码"><a href="#实验代码" class="headerlink" title="实验代码"></a>实验代码</h1><h2 id="成绩排名"><a href="#成绩排名" class="headerlink" title="成绩排名"></a>成绩排名</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">datarea segment</span><br><span class="line">    grade   dw 88,75,95,63,98,78,87,73,90,60</span><br><span class="line">    rank    dw 10 dup(?)</span><br><span class="line">datarea ends</span><br><span class="line">prognam segment</span><br><span class="line">main proc far</span><br><span class="line">               assume cs:prognam,ds:datarea,es:datarea</span><br><span class="line">    start:     </span><br><span class="line">               push   ds</span><br><span class="line">               sub    ax,ax</span><br><span class="line">               push   ax</span><br><span class="line">               mov    ax,datarea</span><br><span class="line">               mov    ds,ax</span><br><span class="line">               mov    es,ax</span><br><span class="line">               call   sort</span><br><span class="line">               call   output</span><br><span class="line">               ret</span><br><span class="line">main endp</span><br><span class="line">sort proc</span><br><span class="line">               mov    si,0</span><br><span class="line">               mov    cx,10</span><br><span class="line">    outer_loop:</span><br><span class="line">               push   cx</span><br><span class="line">               mov    cx,10</span><br><span class="line">               mov    dx,1</span><br><span class="line">               mov    ax,grade[si]</span><br><span class="line">               mov    di,offset grade</span><br><span class="line">    inner_loop:</span><br><span class="line">               cmp    ax,[di]</span><br><span class="line">               jge    no_add</span><br><span class="line">               inc    dx</span><br><span class="line">    no_add:    </span><br><span class="line">               add    di,2</span><br><span class="line">               loop   inner_loop</span><br><span class="line">               pop    cx</span><br><span class="line">               mov    rank[si],dx</span><br><span class="line">               add    si,2</span><br><span class="line">               loop   outer_loop</span><br><span class="line">               ret</span><br><span class="line">sort endp</span><br><span class="line">output proc</span><br><span class="line">               mov    cx,10</span><br><span class="line">               mov    si,0</span><br><span class="line">    t1:        </span><br><span class="line">               push   cx</span><br><span class="line">               mov    ax,rank[si]</span><br><span class="line">               call   print_dec</span><br><span class="line">               mov    dl,&#x27; &#x27;</span><br><span class="line">               call   putchar</span><br><span class="line">               pop    cx</span><br><span class="line">               add    si,2</span><br><span class="line">               loop   t1</span><br><span class="line">               ret</span><br><span class="line">output endp</span><br><span class="line">putchar proc</span><br><span class="line">               mov    ah,2</span><br><span class="line">               int    21h</span><br><span class="line">               ret</span><br><span class="line">putchar endp</span><br><span class="line">print_dec proc</span><br><span class="line">    ;ax/?=al...ah, result:al,ah</span><br><span class="line">               mov    bl,10</span><br><span class="line">               div    bl</span><br><span class="line">               mov    bx,ax</span><br><span class="line">               mov    dl,bl</span><br><span class="line">               add    dl,&#x27;0&#x27;</span><br><span class="line">               call   putchar</span><br><span class="line">               mov    dl,bh</span><br><span class="line">               add    dl,&#x27;0&#x27;</span><br><span class="line">               call   putchar</span><br><span class="line">               ret</span><br><span class="line">print_dec endp</span><br><span class="line">prognam ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h2 id="ASCII码表"><a href="#ASCII码表" class="headerlink" title="ASCII码表"></a>ASCII码表</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">datarea segment</span><br><span class="line">datarea ends</span><br><span class="line">prognam segment</span><br><span class="line">main proc far</span><br><span class="line">             assume ds:datarea,cs:prognam,es:datarea</span><br><span class="line">    start:   </span><br><span class="line">             push   ds</span><br><span class="line">             sub    ax,ax</span><br><span class="line">             push   ax</span><br><span class="line">             mov    ax,datarea</span><br><span class="line">             mov    ds,ax</span><br><span class="line">             mov    es,ax</span><br><span class="line"></span><br><span class="line">             mov    dx,10h</span><br><span class="line">             mov    bx,0</span><br><span class="line">    rotate:  </span><br><span class="line">             mov    ah,2</span><br><span class="line">             int    21h</span><br><span class="line">             inc    bx</span><br><span class="line">             inc    dx</span><br><span class="line">             push   dx</span><br><span class="line">             cmp    bx,16</span><br><span class="line">             mov    dl,&#x27; &#x27;</span><br><span class="line">             mov    ah,2</span><br><span class="line">             int    21h</span><br><span class="line">             jl     continue</span><br><span class="line">             xor    bx,bx</span><br><span class="line">             mov    dl,0dh</span><br><span class="line">             mov    ah,2</span><br><span class="line">             int    21h</span><br><span class="line">             mov    dl,0ah</span><br><span class="line">             mov    ah,2</span><br><span class="line">             int    21h</span><br><span class="line">    continue:</span><br><span class="line">             pop    dx</span><br><span class="line">             cmp    dx,100h</span><br><span class="line">             jl     rotate</span><br><span class="line">             ret</span><br><span class="line">main endp</span><br><span class="line">prognam ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h2 id="反转字符串"><a href="#反转字符串" class="headerlink" title="反转字符串"></a>反转字符串</h2><p>我流版</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">datarea segment</span><br><span class="line">    limit   db 30</span><br><span class="line">    len     db ?</span><br><span class="line">    str     db 30 dup(&#x27;$&#x27;)</span><br><span class="line">datarea ends</span><br><span class="line">prognam segment</span><br><span class="line">main proc far</span><br><span class="line">            assume cs:prognam,ds:datarea,es:datarea</span><br><span class="line">    start:  </span><br><span class="line">            push   ds</span><br><span class="line">            sub    ax,ax</span><br><span class="line">            push   ax</span><br><span class="line">            mov    ax,datarea</span><br><span class="line">            mov    ds,ax</span><br><span class="line">            mov    es,ax</span><br><span class="line"></span><br><span class="line">            ;输入字符串</span><br><span class="line">            lea    dx,limit</span><br><span class="line">            mov    ah,0ah</span><br><span class="line">            int    21h</span><br><span class="line">            ;回车换行</span><br><span class="line">            mov    dl,0dh</span><br><span class="line">            mov    ah,2</span><br><span class="line">            int    21h</span><br><span class="line">            mov    dl,0ah</span><br><span class="line">            mov    ah,2</span><br><span class="line">            int    21h</span><br><span class="line">            ;di置为字符串长度减一，cx计数器置为字符串长度除以2</span><br><span class="line">            mov    si,0</span><br><span class="line">            mov    bl,len</span><br><span class="line">            xor    bh,bh</span><br><span class="line">            mov    di,bx</span><br><span class="line">            dec    di</span><br><span class="line">            mov    cx,1</span><br><span class="line">            ;除以2</span><br><span class="line">            shr    bx,cl</span><br><span class="line">            mov    cx,bx</span><br><span class="line">    rotate: </span><br><span class="line">            mov    al,str[si]</span><br><span class="line">            mov    bl,str[di]</span><br><span class="line">            mov    str[si],bl</span><br><span class="line">            mov    str[di],al</span><br><span class="line">            inc    si</span><br><span class="line">            dec    di</span><br><span class="line">            loop   rotate</span><br><span class="line">            lea    dx,str</span><br><span class="line">            mov    ah,9</span><br><span class="line">            int    21h</span><br><span class="line">            ret</span><br><span class="line">main endp</span><br><span class="line">prognam ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<p>ppt递归版</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">datarea segment</span><br><span class="line">    str     db &quot;123456&quot;,&#x27;$&#x27;</span><br><span class="line">datarea ends</span><br><span class="line">prognam segment</span><br><span class="line">main proc far</span><br><span class="line">            assume cs:prognam,ds:datarea,es:datarea</span><br><span class="line">    start:  </span><br><span class="line">            push   ds</span><br><span class="line">            sub    ax,ax</span><br><span class="line">            push   ax</span><br><span class="line">            mov    ax,datarea</span><br><span class="line">            mov    ds,ax</span><br><span class="line">            mov    es,ax</span><br><span class="line"></span><br><span class="line">            mov    bx, offset str</span><br><span class="line">            push   bx</span><br><span class="line">            call   revers</span><br><span class="line">            pop    bx</span><br><span class="line">            mov    dl, [bx]</span><br><span class="line">            mov    ah, 2</span><br><span class="line">            int    21h</span><br><span class="line"></span><br><span class="line">            ret</span><br><span class="line">main endp</span><br><span class="line">revers proc  near</span><br><span class="line">            push   bp</span><br><span class="line">            mov    bp, sp</span><br><span class="line">            push   ax</span><br><span class="line">            push   bx</span><br><span class="line">            push   dx</span><br><span class="line">            mov    bx, [bp+4]</span><br><span class="line">            mov    al, [bx]</span><br><span class="line">            cmp    al, &#x27;$&#x27;</span><br><span class="line">            je     return</span><br><span class="line">    re_call:</span><br><span class="line">            inc    bx</span><br><span class="line">            push   bx</span><br><span class="line">            call   revers</span><br><span class="line">            pop    bx</span><br><span class="line">            mov    dl, [bx]</span><br><span class="line">            mov    ah, 2</span><br><span class="line">            int    21h</span><br><span class="line">    return: </span><br><span class="line">            pop    dx</span><br><span class="line">            pop    bx</span><br><span class="line">            pop    ax</span><br><span class="line">            pop    bp</span><br><span class="line">            ret</span><br><span class="line">revers endp</span><br><span class="line"></span><br><span class="line">prognam ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h2 id="查找子串位置，十进制、十六进制输出"><a href="#查找子串位置，十进制、十六进制输出" class="headerlink" title="查找子串位置，十进制、十六进制输出"></a>查找子串位置，十进制、十六进制输出</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line">datarea segment</span><br><span class="line">                 sentence_label label byte</span><br><span class="line">    sentence_max db             50</span><br><span class="line">    sentence_len db             ?</span><br><span class="line">    sentence     db             50 dup(&#x27;$&#x27;)</span><br><span class="line">                 key_label      label byte</span><br><span class="line">    key_max      db             30</span><br><span class="line">    key_len      db             ?</span><br><span class="line">    key          db             30 dup(&#x27;$&#x27;)</span><br><span class="line"></span><br><span class="line">    cmd1         db             &#x27;Input a sentence:&#x27;,&#x27;$&#x27;</span><br><span class="line">    cmd2         db             &#x27;Input a keyword:&#x27;,&#x27;$&#x27;</span><br><span class="line">    no_match_str db             &#x27;No match!&#x27;,0dh,0ah,&#x27;$&#x27;</span><br><span class="line">    match_str    db             &quot;The location:&quot;,&#x27;$&#x27;</span><br><span class="line">    crlf_str     db             0dh,0ah,&#x27;$&#x27;</span><br><span class="line"></span><br><span class="line">datarea ends</span><br><span class="line">prognam segment</span><br><span class="line">main proc far</span><br><span class="line">                 assume cs:prognam,ds:datarea,es:datarea</span><br><span class="line">    start:       </span><br><span class="line">                 push   ds</span><br><span class="line">                 sub    ax,ax</span><br><span class="line">                 push   ax</span><br><span class="line">                 mov    ax,datarea</span><br><span class="line">                 mov    ds,ax</span><br><span class="line">                 mov    es,ax</span><br><span class="line">    loops:       </span><br><span class="line">                 lea    dx,cmd1</span><br><span class="line">                 call   cout</span><br><span class="line">                 call   cin_sentence</span><br><span class="line">                 call   crlf</span><br><span class="line">                 cmp    sentence[0],3                       ;比较ctrl+c</span><br><span class="line">                 je     exit</span><br><span class="line">                 lea    dx,cmd2</span><br><span class="line">                 call   cout</span><br><span class="line">                 call   cin_key</span><br><span class="line">                 call   crlf</span><br><span class="line">                 call   compare</span><br><span class="line">                 jmp    loops</span><br><span class="line">    exit:        </span><br><span class="line">                 ret</span><br><span class="line">main endp</span><br><span class="line">cin proc</span><br><span class="line">                 mov    ah,0ah</span><br><span class="line">                 int    21h</span><br><span class="line">                 ret</span><br><span class="line">cin endp</span><br><span class="line">cin_sentence proc</span><br><span class="line">                 lea    dx,sentence_label</span><br><span class="line">                 call   cin</span><br><span class="line">                 ret</span><br><span class="line">cin_sentence endp</span><br><span class="line">cin_key proc</span><br><span class="line">                 lea    dx,key_label</span><br><span class="line">                 call   cin</span><br><span class="line">                 ret</span><br><span class="line">cin_key endp</span><br><span class="line">cout proc</span><br><span class="line">                 mov    ah,09h</span><br><span class="line">                 int    21h</span><br><span class="line">                 ret</span><br><span class="line">cout endp</span><br><span class="line">crlf proc</span><br><span class="line">                 lea    dx,crlf_str</span><br><span class="line">                 call   cout</span><br><span class="line">                 ret</span><br><span class="line">crlf endp</span><br><span class="line">compare proc</span><br><span class="line">    ;cx=sentence_len-key_len+1</span><br><span class="line">                 xor    ch,ch</span><br><span class="line">                 xor    dh,dh</span><br><span class="line">                 xor    bx,bx</span><br><span class="line">                 mov    cl,sentence_len</span><br><span class="line">                 mov    dl,sentence_len</span><br><span class="line">                 sub    cx,dx</span><br><span class="line">                 inc    cx</span><br><span class="line">    rotate:      </span><br><span class="line">                 lea    si,sentence[bx]</span><br><span class="line">                 lea    di,key</span><br><span class="line">                 mov    cl,key_len</span><br><span class="line">                 xor    ch,ch</span><br><span class="line">                 cld</span><br><span class="line">                 rep    cmpsb</span><br><span class="line">                 jz     match</span><br><span class="line">                 inc    bx</span><br><span class="line">                 loop   rotate</span><br><span class="line">    no_match:    </span><br><span class="line">                 lea    dx,no_match_str</span><br><span class="line">                 call   cout</span><br><span class="line">                 ret</span><br><span class="line">    match:       </span><br><span class="line">                 lea    dx,match_str</span><br><span class="line">                 call   cout</span><br><span class="line">                 call   print_dec</span><br><span class="line">                 call   crlf</span><br><span class="line"></span><br><span class="line">                 lea    dx,match_str</span><br><span class="line">                 call   cout</span><br><span class="line">                 call   print_hex</span><br><span class="line">                 call   crlf</span><br><span class="line"></span><br><span class="line">                 ret</span><br><span class="line">compare endp</span><br><span class="line">    ;打印十进制数字</span><br><span class="line">print_dec proc</span><br><span class="line">    ;ax/?=al...ah</span><br><span class="line">                 push   bx</span><br><span class="line">                 mov    ax,bx</span><br><span class="line">                 xor    cx,cx</span><br><span class="line">    div10:       </span><br><span class="line">                 mov    bl,10</span><br><span class="line">                 div    bl</span><br><span class="line">                 push   ax</span><br><span class="line">                 inc    cx</span><br><span class="line">                 xor    ah,ah</span><br><span class="line">                 cmp    al,0</span><br><span class="line">                 jne    div10</span><br><span class="line">    print10:     </span><br><span class="line">                 pop    dx</span><br><span class="line">                 mov    dl,dh</span><br><span class="line">                 add    dl,30h</span><br><span class="line">                 mov    ah,2</span><br><span class="line">                 int    21h</span><br><span class="line">                 loop   print10</span><br><span class="line">                 pop    bx</span><br><span class="line">                 ret</span><br><span class="line">print_dec endp</span><br><span class="line">    ;打印十六进制数字</span><br><span class="line">print_hex proc</span><br><span class="line">                 push   bx</span><br><span class="line">                 xor    ax,ax</span><br><span class="line">    div16:       </span><br><span class="line">                 mov    dx,0fh</span><br><span class="line">                 and    dx,bx</span><br><span class="line">                 push   dx</span><br><span class="line">                 inc    ax</span><br><span class="line">                 mov    cl,4</span><br><span class="line">                 shr    bx,cl</span><br><span class="line">                 cmp    bx,0</span><br><span class="line">                 jne    div16</span><br><span class="line">                 mov    cx,ax</span><br><span class="line">    print16:     </span><br><span class="line">                 pop    dx</span><br><span class="line">                 add    dx,&#x27;0&#x27;</span><br><span class="line">                 cmp    dx,&#x27;9&#x27;</span><br><span class="line">                 jle    not_letter</span><br><span class="line">                 add    dx,&#x27;A&#x27;-&#x27;0&#x27;-10</span><br><span class="line">    not_letter:  </span><br><span class="line">                 mov    ah,2</span><br><span class="line">                 int    21h</span><br><span class="line">                 loop   print16</span><br><span class="line">                 pop    bx</span><br><span class="line">                 ret</span><br><span class="line">print_hex endp</span><br><span class="line">prognam ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.misaka-xxw.github.io/2024/11/04/cx-Freeze/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Misaka-xxw">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Misaka-xxw的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Misaka-xxw的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/11/04/cx-Freeze/" class="post-title-link" itemprop="url">cx_Freeze:Python打包成可执行文件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-11-04 18:20:46" itemprop="dateCreated datePublished" datetime="2024-11-04T18:20:46+08:00">2024-11-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-21 19:04:59" itemprop="dateModified" datetime="2025-01-21T19:04:59+08:00">2025-01-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>305</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>之前Pyinstaller打包失败，所以换成cx-Freeze打包。</p>
<p><a target="_blank" rel="noopener" href="https://cx-freeze.readthedocs.io/en/latest/script.html">官网</a>写的很清楚。<br>最简单粗暴的打包是这样的，可执行文件和pyinstaller一样生成在dist文件夹里</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cxFreeze main.py</span><br></pre></td></tr></table></figure>
<p>例如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cxfreeze --script hello.py --target-dir dist</span><br><span class="line"></span><br><span class="line">--script=要打包的主py文件</span><br><span class="line">--init-script=开始启动的文件，如果没写绝对路径的话，会去cx_Freeze package的根目录里找</span><br><span class="line">--base=NAME, --base-name=NAME</span><br><span class="line">--target-name=生成可执行文件的名字，不要包含路径</span><br><span class="line">--target-dir=生成可执行文件所在目录，默认为dist</span><br><span class="line">--icon=图标</span><br><span class="line">--shortcut-name=快捷方式的名字（MSI）</span><br><span class="line">--shortcut-dir=MSI安装包</span><br></pre></td></tr></table></figure>
<p>如果不想出现控制台窗口的话：就加上<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--base-name=&quot;win32gui&quot;</span><br></pre></td></tr></table></figure><br>e.g.<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cxfreeze --script main.py --target-dir dist --base-name=&quot;win32gui&quot;</span><br></pre></td></tr></table></figure></p>
<p>只打包了main.py,其它文件没有被打包上。copy到<br>每次都要敲命令行非常麻烦，新建一个bat文件批量复制，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> <span class="string">&quot;root_path=%~dp0&quot;</span></span><br><span class="line">cxFreeze --script main.py --icon=%root_path%Assets\icons\logo_orange.ico  --target-dir dist --base-name=<span class="string">&quot;win32gui&quot;</span></span><br><span class="line"><span class="built_in">set</span> exe_path=%root_path%dist</span><br><span class="line">XCOPY %root_path%\Assets\ %exe_path%\Assets\ /E /I</span><br><span class="line">XCOPY %root_path%\Temp\ %exe_path%\Temp\ /E /I</span><br><span class="line">XCOPY %root_path%\Templates\ %exe_path%\Templates\ /E /I</span><br><span class="line">XCOPY %root_path%\Views\ %exe_path%\Views\ /E /I</span><br><span class="line">XCOPY %root_path%\Sqlite\ %exe_path%\Sqlite\ /E /I</span><br><span class="line">XCOPY %root_path%\.venv\Lib\site-packages\sqlalchemy\ %exe_path%\lib\sqlalchemy\/E /I</span><br><span class="line"><span class="built_in">echo</span> END!</span><br><span class="line">pause</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.misaka-xxw.github.io/2024/11/04/pyqt-fluent/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Misaka-xxw">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Misaka-xxw的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Misaka-xxw的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/11/04/pyqt-fluent/" class="post-title-link" itemprop="url">pyqt5前端框架与Fluent Design 风格组件库小记录</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-11-04 18:20:46" itemprop="dateCreated datePublished" datetime="2024-11-04T18:20:46+08:00">2024-11-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-21 19:32:15" itemprop="dateModified" datetime="2025-01-21T19:32:15+08:00">2025-01-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>742</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="原生pyqt"><a href="#原生pyqt" class="headerlink" title="原生pyqt"></a>原生pyqt</h1><ul>
<li>直接去github上clone个<a target="_blank" rel="noopener" href="https://github.com/thetheorange">thetheorange</a>大佬的项目，再看他在博客园上发的<a target="_blank" rel="noopener" href="https://www.cnblogs.com/thetheorange">博客</a>，跟着依葫芦画瓢，你就学会了</li>
<li><a target="_blank" rel="noopener" href="https://github.com/ChatGPTNextWeb/ChatGPT-Next-Web">不是qt开发，是web开发，但是好看的ai应用界面，github链接</a></li>
<li><a target="_blank" rel="noopener" href="https://app.nextchat.dev/">上述所说的nextchat预览</a></li>
</ul>
<hr>
<h1 id="fluent"><a href="#fluent" class="headerlink" title="fluent"></a>fluent</h1><ul>
<li><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV12c411L73q/?share_source=copy_web&amp;vd_source=e0feca00b56a0c70f595151ad941f81d">bilibili【PyQt-Fluent-Widgets: 基于 PyQt/PySide 的 Fluent Design 风格组件库】</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://pyqt-fluent-widgets.readthedocs.io/zh-cn/latest/quick-start.html">fluent组件库的官方文档</a><br>安装读官方文档即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install &quot;PyQt-Fluent-Widgets[full]&quot; -i https://pypi.org/simple/</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="添加designer-fluent启动的外部工具"><a href="#添加designer-fluent启动的外部工具" class="headerlink" title="添加designer-fluent启动的外部工具"></a>添加designer-fluent启动的外部工具</h2><ul>
<li>学到了一个很好的脚本打开方式，新建一个这样的txt记事本文件，然后把后缀名改成.bat,最后放到外部工具里，</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">start cmd /k &quot;cd /【你放Fluent组件的盘符】 【你clone这个PyQt-Fluent-Widgets的文件夹】 &amp;&amp; conda activate 【你的conda环境】  &amp;&amp; python tools/designer.py&quot;</span><br></pre></td></tr></table></figure>
<ul>
<li>比如说，我的是这样的：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">start cmd /k &quot;cd /d D:\GitHub\PyQt-Fluent-Widgets &amp;&amp; conda activate D:\python\envs\qt5_env  &amp;&amp; python tools/designer.py&quot;</span><br></pre></td></tr></table></figure>
<ul>
<li>如果报错了，那么就一句一句复制贴贴到cmd里，看看哪里出问题。比如说，我们那时候，作者似乎不小心把tools文件夹给删了。。。这时候切换分支即可。<br>例子：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/d</span><br><span class="line">cd D:\GitHub\PyQt-Fluent-Widgets</span><br><span class="line">conda activate D:\python\envs\qt5_env</span><br><span class="line">python tools/designer.py</span><br></pre></td></tr></table></figure>
<ul>
<li>没问题的话可以添加到pycharm里：<br>文件/设置/工具/外部工具/+<br>写上你工具的路径名，起个顺眼的名字。<br><img src="pycharm-tool.png" alt="alt text"><br>当然你也可以用c/c++等语言写出来，编译，然后放exe文件。</li>
</ul>
<h2 id="实战问题大全和解决方法"><a href="#实战问题大全和解决方法" class="headerlink" title="实战问题大全和解决方法"></a>实战问题大全和解决方法</h2><h3 id="在designer里设置的背景图片和icon在python里打开看不到"><a href="#在designer里设置的背景图片和icon在python里打开看不到" class="headerlink" title="在designer里设置的背景图片和icon在python里打开看不到"></a>在designer里设置的背景图片和icon在python里打开看不到</h3><p>因为uic.loadUi 这个方法已经把背景图片和icon加载进去了<br>其实你可以换另一种方法，就是Designer里面不设置icon和背景图片，但在py里面设置<br>外部的图片 icon 资源不要在ui文件中引用 应在外部的py文件里写入。这么做有三个好处，一是分离资源，方便后续的管理，二是方便调试和自定义操作，三是可以减少ui文件的体积</p>
<h3 id="解决未铺满问题"><a href="#解决未铺满问题" class="headerlink" title="解决未铺满问题"></a>解决未铺满问题</h3><p><img src="fluent-layout.png" alt="alt text"><br>首先要用布局器进行布局 而不是frame<br><img src="fluent-layout2.png" alt="alt text"><br>虽然frame一定程度上能对控件进行分类，但是效果不如布局器的好<br>尽量用Widget作为新建窗口 使用MainWindow的话，一是语义不符，二是有些臃肿<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在每个窗体的py文件里面加上 这三行代码 保证布局的稳定</span></span><br><span class="line">QApplication.setHighDpiScaleFactorRoundingPolicy(Qt.HighDpiScaleFactorRoundingPolicy.PassThrough)</span><br><span class="line">QApplication.setAttribute(Qt.AA_EnableHighDpiScaling)</span><br><span class="line">QApplication.setAttribute(Qt.AA_UseHighDpiPixmaps)</span><br></pre></td></tr></table></figure></p>
<h3 id="聊天气泡框"><a href="#聊天气泡框" class="headerlink" title="聊天气泡框"></a>聊天气泡框</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_59452630/article/details/134481680">csdn博客介绍</a><br><a target="_blank" rel="noopener" href="https://gitcode.com/LC044/pyqt_component_library">gitcode开源链接</a></p>
<h3 id="pyinstaller和pipenv：py打包"><a href="#pyinstaller和pipenv：py打包" class="headerlink" title="pyinstaller和pipenv：py打包"></a>pyinstaller和pipenv：py打包</h3><p>踩坑记录：<br>首先用conda不知道为什么会出错。用了Virtualenv。<br>其次，它有一些import问题。<br>还是打包简单的项目文件比较好。后面我使用cx_Freeze配合bat后缀文件打包，解决了打包问题。可以看我的另一篇<a target="_blank" rel="noopener" href="https://misaka-xxw.github.io/2024/11/04/cx-Freeze/">博客</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.misaka-xxw.github.io/2024/09/27/markdown/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Misaka-xxw">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Misaka-xxw的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Misaka-xxw的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/09/27/markdown/" class="post-title-link" itemprop="url">Markdown最基础格式</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-09-27 09:15:36" itemprop="dateCreated datePublished" datetime="2024-09-27T09:15:36+08:00">2024-09-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-21 15:34:24" itemprop="dateModified" datetime="2025-01-21T15:34:24+08:00">2025-01-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Markdown/" itemprop="url" rel="index"><span itemprop="name">Markdown</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>262</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><del>年少不懂事，做mikumikudance时期，用记事本打开readme点md</del><br>我一般用vscode看，其实用jetbrain的软件也可以<br>vscode配这三个插件：<img src="markdown-plugins.png" alt="alt text"><br>完美。<a target="_blank" rel="noopener" href="https://www.runoob.com/markdown/md-tutorial.html">下载安装和学习这个就可以了</a><br><del>既然这就是个md文件，所以还要简单记录一下格式吗？</del><br><del>要的，我抄一下</del><br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 一级标题</span></span><br><span class="line"><span class="section">## 二级标题</span></span><br><span class="line"><span class="section">### 三级标题</span></span><br><span class="line"><span class="section">#### 四级标题</span></span><br><span class="line"><span class="section">##### 五级标题</span></span><br><span class="line"><span class="section">###### 六级标题</span></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">上面是划线，如果划线上有字会变成二级标题。一堆=上面有字是一级标题。</span><br><span class="line">各种分割线</span><br><span class="line"><span class="strong">***</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">* * *</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">**</span><span class="strong">***</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">- - -</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">----------</span></span><br><span class="line"><span class="strong"><span class="emphasis">*斜体文本*</span></span></span><br><span class="line"><span class="strong"><span class="emphasis">_斜体文本_</span></span></span><br><span class="line"><span class="strong">**</span>粗体文本**</span><br><span class="line"><span class="strong">__粗体文本__</span></span><br><span class="line"><span class="strong">**<span class="emphasis">*粗斜体文本*</span>**</span></span><br><span class="line"><span class="strong">__<span class="emphasis">_粗斜体文本_</span>__</span></span><br><span class="line">~浅一点的字体~</span><br><span class="line">~~删除线，非常爱用~~</span><br><span class="line">==高光==</span><br><span class="line"></span><br><span class="line"><span class="bullet">*</span> 第一项</span><br><span class="line"><span class="bullet">*</span> 第二项</span><br><span class="line"><span class="bullet">*</span> 第三项</span><br><span class="line"></span><br><span class="line"><span class="bullet">+</span> 第一项</span><br><span class="line"><span class="bullet">+</span> 第二项</span><br><span class="line"><span class="bullet">+</span> 第三项</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> 第一项</span><br><span class="line"><span class="bullet">-</span> 第二项</span><br><span class="line"><span class="bullet">-</span> 第三项</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> 第一项</span><br><span class="line"><span class="bullet">2.</span> 第二项</span><br><span class="line"><span class="bullet">3.</span> 第三项</span><br><span class="line"></span><br><span class="line"><span class="quote">&gt; 最外层</span></span><br><span class="line"><span class="quote">&gt; &gt; 第一层嵌套</span></span><br><span class="line"><span class="quote">&gt; &gt; &gt; 第二层嵌套</span></span><br><span class="line"></span><br><span class="line">还有现在在用的是区块。算了不抄了，直接看菜鸟教程吧。</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.misaka-xxw.github.io/2024/05/16/git-standard/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Misaka-xxw">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Misaka-xxw的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Misaka-xxw的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/05/16/git-standard/" class="post-title-link" itemprop="url">git速查表和提交标准</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-05-16 23:44:56" itemprop="dateCreated datePublished" datetime="2024-05-16T23:44:56+08:00">2024-05-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-21 15:45:53" itemprop="dateModified" datetime="2025-01-21T15:45:53+08:00">2025-01-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Git/" itemprop="url" rel="index"><span itemprop="name">Git</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>182</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="git分支操作"><a href="#git分支操作" class="headerlink" title="git分支操作"></a>git分支操作</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/chen134225/article/details/95475960">git分支操作 可以当速查表看看</a></p>
<p>新建一个空白分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout --orphan newBranchName</span><br></pre></td></tr></table></figure>
<h1 id="签名认证"><a href="#签名认证" class="headerlink" title="签名认证"></a>签名认证</h1><p>待填坑</p>
<h1 id="git-commit-message标准"><a href="#git-commit-message标准" class="headerlink" title="git commit message标准"></a>git commit message标准</h1><h2 id="基本格式"><a href="#基本格式" class="headerlink" title="基本格式"></a>基本格式</h2><p><strong>type</strong> + 描述</p>
<h2 id="type类型"><a href="#type类型" class="headerlink" title="type类型"></a>type类型</h2><ul>
<li><strong>feat</strong> 新功能</li>
<li>fix/to <ul>
<li>fix <strong>产生diff</strong>并自动修复问题。适合一次提交直接修复格式</li>
<li>to <strong>只产生diff</strong>不自动修复此问题。适合于多次提交。最终修复问题提交时使用fix</li>
</ul>
</li>
<li>docs 提交文档</li>
<li>style 格式 不影响代码运行的变动 </li>
<li>refactor 重构</li>
<li>perf 优化</li>
<li>test 测试 单元测试</li>
<li>chore 构建过程或辅助工具的变动</li>
<li>revert 回滚到上一个版本</li>
<li>merge 代码合并</li>
<li>sync 同步主线或分支的bug</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.misaka-xxw.github.io/2024/05/16/pip/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Misaka-xxw">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Misaka-xxw的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Misaka-xxw的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/05/16/pip/" class="post-title-link" itemprop="url">pip微记录：更新、设置镜像源和依赖</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-05-16 23:44:56" itemprop="dateCreated datePublished" datetime="2024-05-16T23:44:56+08:00">2024-05-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-21 15:49:39" itemprop="dateModified" datetime="2025-01-21T15:49:39+08:00">2025-01-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>121</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="更新pip"><a href="#更新pip" class="headerlink" title="更新pip"></a>更新pip</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python.exe -m pip install --upgrade pip</span><br></pre></td></tr></table></figure>
<h1 id="镜像源"><a href="#镜像源" class="headerlink" title="镜像源"></a>镜像源</h1><ul>
<li>经常install时卡顿，一般会用<a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn">清华大学镜像源</a>。</li>
<li>单个安装使用镜像源<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install 【要安装的库名】 -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure></li>
<li>永久设置镜像源<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure>
<h1 id="requirement-txt"><a href="#requirement-txt" class="headerlink" title="requirement.txt"></a>requirement.txt</h1></li>
<li>有一堆要安装的，要一个一个pip Install？</li>
<li>不，把requirement.txtre放到一个文件夹里，cd到这个文件夹，然后<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure>
导出分享给别人：<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip list --format=freeze &gt; requirements.txt</span><br></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.misaka-xxw.github.io/2024/05/16/NineChapterDreamland/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Misaka-xxw">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Misaka-xxw的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Misaka-xxw的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/05/16/NineChapterDreamland/" class="post-title-link" itemprop="url">《九章绮梦》游戏初开发日记（一）</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-05-16 23:36:53" itemprop="dateCreated datePublished" datetime="2024-05-16T23:36:53+08:00">2024-05-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-21 14:36:37" itemprop="dateModified" datetime="2025-01-21T14:36:37+08:00">2025-01-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Unity/" itemprop="url" rel="index"><span itemprop="name">Unity</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>6 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>写在前面：<br>我的第一次游戏开发。这里是当年的记录，都是新手踩坑，确实没有什么技术含量。尽可能地保留原汁原味😂。</p>
<p>游戏名：九章绮梦<br>unity引擎版本：2022.3.23f1<br>注意：润色部分要在保证程序编完的情况下，再润色。<br>Unity调用命令行，另开新的一篇写。</p>
<h2 id="程序开发备忘录"><a href="#程序开发备忘录" class="headerlink" title="程序开发备忘录"></a>程序开发备忘录</h2><h3 id="开始任务"><a href="#开始任务" class="headerlink" title="开始任务"></a>开始任务</h3><ol>
<li>导入图片（重要）<br>像素素材，为了防止像素模糊，一定要勾选这两项：<br>Filter Mode: Point(No filter)<br>Compression: None</li>
<li><del>润色：第一章还没有做速度控制器。主速度变量在PlayerController。要更改MoveLandscape和SceneScroller</del>已完成</li>
<li>重要：主摄像头，要固定下来，现在比例不对！据说要用GUI什么的。</li>
<li>场景滚动，是用我建立的滚动材料Scroller.mat，再加上滚动脚本即可。注意图片素材模式要是multiple，不能是simple。</li>
<li>panel（暂停后的UI）还没做。先写逻辑，这里估计要放点儿知识文字。</li>
<li>美术缺很多素材！</li>
<li>音频准备了一点点，最后可能还要收集，去找免版权的，我买了一点。</li>
<li>润色：加一个跑步公里数。古代单位估计得。</li>
<li>重要：游戏玩法设计、存档系统。使用json还是……还有一个剧情系统。剧情估计要用json存，但是在脚本存也可以吧。</li>
<li><del>捡到金币的音频已经找到了，还没绑定。</del>还有跳跃的音频还没找到合适的。</li>
<li>说明：tree绑定了随风摇动的shader。</li>
<li>说明：看剧本，想一下如何融入数学元素。</li>
<li>润色：live2D系统，chatGLM调用。</li>
<li><del>未修正：角色和场景速度不对</del>2023/4/6已写速度</li>
</ol>
<h3 id="2024-4-6"><a href="#2024-4-6" class="headerlink" title="2024/4/6"></a><mark>2024/4/6</mark></h3><ol>
<li>学到了oop里的“单例”用法。虽然还没用。</li>
</ol>
<h3 id="2024-4-11"><a href="#2024-4-11" class="headerlink" title="2024/4/11"></a><mark>2024/4/11</mark></h3><h4 id="L要做的部分"><a href="#L要做的部分" class="headerlink" title="L要做的部分"></a>L要做的部分</h4><ol>
<li>看懂已经写的ButtonPause.cs,MoveLandscape.cs,PlayerController.cs,RandomObject.cs,SpeedController.cs,SceneScroller.cs,TextCoin.cs仿照FangTianScence.unity，做后面的场景：SuMi粟米，Junshu均输，GouGu勾股。其中勾股部分是用屋顶素材拼的，和其它关不一样，经常跳跃。在PlayerController.cs中仿照金币写一个被敌人碰扣血的函数。后面可能要做一个主人公发起攻击的。</li>
<li>看上面的记录内容。</li>
<li>收集物品的脚本。</li>
<li>做一个存档脚本，存下关卡通关情况，每一关的最高纪录、人物金币收集情况、人物“知识点”。</li>
<li>准备做UI。网上能找到代码怎么写。<h4 id="未来一周规划"><a href="#未来一周规划" class="headerlink" title="未来一周规划"></a>未来一周规划</h4></li>
</ol>
<h5 id="程序"><a href="#程序" class="headerlink" title="程序"></a>程序</h5><ol>
<li>把剧情写进脚本，不用json了，直接用list数据结构包一个class。一个一个读取。然而为了美好的未来，我还是用了json()</li>
</ol>
<h5 id="美术"><a href="#美术" class="headerlink" title="美术"></a>美术</h5><ol>
<li>画几张聊天背景图，好，就拍照再加滤镜！</li>
<li>主页图，经费充足的话用live2d吗？</li>
<li>地图，这个重要捏</li>
<li>商店</li>
<li>像素风：第一关要收集的四个物品，第二关收集的米袋，第四关飞镖。一个暂停界面，只需要个框！最好和按钮一个色卡<h4 id="unity-live2d使用笔记"><a href="#unity-live2d使用笔记" class="headerlink" title="unity live2d使用笔记"></a>unity live2d使用笔记</h4>建模过程踩的坑不用提了，因为我忘记记录了<br>目线跟踪、眨眼、动画播放要挂载的脚本<br><img src="image-1.png" alt="图片"><br>其中脸部参数可以再调大一点<br><img src="image-2.png" alt="图片"><br><img src="image-3.png" alt="图片"><br><img src="image-4.png" alt="图片"><br>这个系列：<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_68267247/article/details/132415298">Unity制作Live2D（三）头部眼睛跟随鼠标</a><br>总之要把动画全部k帧k出来再导入。<h3 id="2024-4-12"><a href="#2024-4-12" class="headerlink" title="2024/4/12"></a><mark>2024/4/12</mark></h3><h4 id="关于JSON"><a href="#关于JSON" class="headerlink" title="关于JSON"></a>关于JSON</h4>感觉难用，但是就这样吧。<br>在老C那儿查到这些避雷的地方：</li>
<li>用于接收的JSON实体类需要声明[Serializable] 序列化。</li>
<li>使用Unity自带方法时，实体类如果是属性成员（public bool has_more{get;set;}）的话，在序列化的时候会缺失这些成员，导致解析不出来。将属性改为字段即可。</li>
<li>如果解析的对象是数组，自带的不能成功解析，可以人为将其封装为JSON对象。 <mark>对！数组xx的不能不能解析！（愤怒）根本改不好！！！</mark><br>但是改着改着它就从这样<img src="b49bb24c6da2b1c83004c885d481ea73.png" alt="图片">变成了这样<img src="image-5.png" alt="图片"><br>我不理解，完全忘记自己改了什么，并且大受震撼。。。<del>unity我的祖宗，你编译快一点儿</del><br>所以这个有什么用来着？<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="keyword">get</span>;<span class="keyword">set</span>;&#125;</span><br></pre></td></tr></table></figure>
2024/4/15补充：<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">某个人工智能“主动”跟我说：</span><br><span class="line">In C<span class="meta">#, the &#123; get; set; &#125; syntax is used to <span class="keyword">define</span> a property. Let’s break it down:</span></span><br><span class="line"><span class="keyword">get</span>: This part defines the getter <span class="keyword">for</span> the property. It allows you to retrieve the <span class="keyword">value</span> of the property. When you access the property, the code inside the <span class="keyword">get</span> block <span class="keyword">is</span> executed, <span class="keyword">and</span> the result <span class="keyword">is</span> returned.</span><br><span class="line"><span class="keyword">set</span>: This part defines the setter <span class="keyword">for</span> the property. It allows you to assign a <span class="keyword">value</span> to the property. When you assign a <span class="keyword">value</span> to the property, the code inside the <span class="keyword">set</span> block <span class="keyword">is</span> executed, <span class="keyword">and</span> the <span class="keyword">value</span> <span class="keyword">is</span> stored.</span><br><span class="line">Here’s an example of how you might use <span class="keyword">this</span> syntax to create a simple property <span class="keyword">in</span> C<span class="meta">#:</span></span><br><span class="line">;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Private field to store the value</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span> _name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Property with getter and setter</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> _name; &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123; _name = <span class="keyword">value</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">In <span class="keyword">this</span> example:</span><br><span class="line"></span><br><span class="line">The Name property has both a getter <span class="keyword">and</span> a setter.</span><br><span class="line">When you read person.Name, it calls the <span class="keyword">get</span> block <span class="keyword">and</span> returns the stored _name <span class="keyword">value</span>.</span><br><span class="line">When you assign a <span class="keyword">value</span> to person.Name, it calls the <span class="keyword">set</span> block <span class="keyword">and</span> updates the _name field.</span><br><span class="line">Feel free to adapt <span class="keyword">this</span> pattern to your specific use <span class="keyword">case</span>! 😊</span><br></pre></td></tr></table></figure>
于是莫名其妙的，我们就可以SetTrigger播放人物动画了，好耶！<br>顺便一提，不知道哪儿冲突了，小九的微笑眯眯眼和什么冲突了，悲()<br>假如此时，能来个很厉害的美工就太美妙了，再来亿点儿live2D模型吧！！<h3 id="2024-4-14"><a href="#2024-4-14" class="headerlink" title="2024/4/14"></a><mark>2024/4/14</mark></h3>做了剧本一个字一个字播放<h4 id="关于c-的oop"><a href="#关于c-的oop" class="headerlink" title="关于c#的oop"></a>关于c#的oop</h4>我忘记我要记什么oop了。。。<h3 id="2024-4-15"><a href="#2024-4-15" class="headerlink" title="2024/4/15"></a><mark>2024/4/15</mark></h3></li>
<li>摄像头比例是Camera.main.aspect。但我还是搞不好啊！</li>
<li>重新测试了python chatglm角色ai聊天，写了unity和python通信的脚本。<br>为什么要用cmd.exe呢？因为太菜了，看到socket的代码望而生畏，觉得cmd比较好搞，遂学之。python那边就是用我们的老朋友sys了。<br>这里是用Thread类，网上说不用的话会报错。查了一下概念：<br>线程(Thread)是进程中一个单一的顺序控制流程。线程是进程中的实体。一个进程可以有多个线程，一个线程必须有一个父进程。<h3 id="2024-4-19"><a href="#2024-4-19" class="headerlink" title="2024/4/19"></a><mark>2024/4/19</mark></h3>这几天都在画画。但这是程序开发备忘录。<h3 id="2024-4-20"><a href="#2024-4-20" class="headerlink" title="2024/4/20"></a><mark>2024/4/20</mark></h3></li>
<li>video的导入遇到了困难。还好格式转换解决了。（后面补充一下，还是不行，有bug）</li>
<li>添加了游戏知识卡，虽然丑丑的。</li>
<li>比例还是有问题。</li>
<li>找了画手朋友画了些东西。<h3 id="2024-4-忘了"><a href="#2024-4-忘了" class="headerlink" title="2024/4/忘了"></a><mark>2024/4/忘了</mark></h3>记得时间戳暂停了恢复回来啊喂！还有ai板块编译出来就寄了，以后要想办法解决！</li>
</ol>
<h2 id="程序心得记录"><a href="#程序心得记录" class="headerlink" title="程序心得记录"></a>程序心得记录</h2><p>累死了，最后一天疯狂修bug，不写啦</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.misaka-xxw.github.io/2024/05/16/delete_commit/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Misaka-xxw">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Misaka-xxw的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Misaka-xxw的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/05/16/delete_commit/" class="post-title-link" itemprop="url">删commit记录</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-05-16 14:45:51" itemprop="dateCreated datePublished" datetime="2024-05-16T14:45:51+08:00">2024-05-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-21 14:37:13" itemprop="dateModified" datetime="2025-01-21T14:37:13+08:00">2025-01-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Git/" itemprop="url" rel="index"><span itemprop="name">Git</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>797</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="记录一次收拾“把超大库放进仓库”的烂摊子"><a href="#记录一次收拾“把超大库放进仓库”的烂摊子" class="headerlink" title="记录一次收拾“把超大库放进仓库”的烂摊子"></a>记录一次收拾“把超大库放进仓库”的烂摊子</h1><h2 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h2><p>git是放代码的地方，但是我很蠢地把Unity的库给放进去，而且每次提交把全部有用没用的更改全交了。<del>这就是不好好看新手教程的下场啊。</del><br>首先，要是直接在github里删除的话，历史记录还在那儿，.git文件依然会特别大。<br>删了一个library文件夹，.git文件大小: <mark> 1.71GB -&gt; 633 MB </mark>。而library自己有多大呢？<mark>2.04 GB</mark>。。。<br>于是搜查资料，查到了，按教程做，结果————</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> git filter-branch --force --index-filter &#x27;git rm --cached --ignore-unmatch Library&#x27; --prune-empty --tag-name-filter cat -- --all</span><br><span class="line">WARNING: git-filter-branch has a glut of gotchas generating mangled history</span><br><span class="line">         rewrites.  Hit Ctrl-C before proceeding to abort, then use an</span><br><span class="line">         alternative filtering tool such as &#x27;git filter-repo&#x27;</span><br><span class="line">         (https://github.com/newren/git-filter-repo/) instead.  See the</span><br><span class="line">         filter-branch manual page for more details; to squelch this warning,</span><br><span class="line">         set FILTER_BRANCH_SQUELCH_WARNING=1.</span><br><span class="line">Proceeding with filter-branch...</span><br><span class="line"></span><br><span class="line">Cannot rewrite branches: You have unstaged changes.</span><br></pre></td></tr></table></figure>
<p>嗯。。。但是我没保存的那些没用的东西，真是又多又没用。</p>
<h2 id="解决方式"><a href="#解决方式" class="headerlink" title="解决方式"></a>解决方式</h2><p>那就按这他给的<a target="_blank" rel="noopener" href="https://github.com/newren/git-filter-repo/">链接</a>搜索了。</p>
<p>在保证什么什么环境变量没问题的情况下。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install git-filter-repo</span><br></pre></td></tr></table></figure>
<p>接下来，cd或者进入到文件夹，右键git bash。<br>这里教程也写了备份，但是我胆子大，没备份。不能这样。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> -r your_repo your_repo_backup</span><br></pre></td></tr></table></figure>
<p>然后就可以愉快地删除了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git filter-repo --force --invert-paths --path <span class="string">&#x27;Library&#x27;</span></span><br></pre></td></tr></table></figure>
<p>清理并优化本地仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git reflog expire --all --expire-unreachable=now --update-reflogs</span><br><span class="line">git gc --prune=now --aggressive</span><br></pre></td></tr></table></figure>
<p>推送更改到远程仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin &lt;仓库URL&gt;</span><br><span class="line">或者</span><br><span class="line">git remote set-url origin &lt;仓库URL&gt;</span><br><span class="line"></span><br><span class="line">git push origin --force --all</span><br><span class="line">git push origin --force --tags</span><br></pre></td></tr></table></figure>
<p>重新clone，好好设置gitignore啊喂！终于理解去年为什么学长禁止我把美术资源的工程文件也push上了，唉。。。</p>
<p>于是去copy了学长的gitignore文件，以后就不会这么逆天了。仅针对unity引擎。</p>
<details>
<summary>Unity gitignore模板</summary>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This .gitignore file should be placed at the root of your Unity project directory</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Get latest from https://github.com/github/gitignore/blob/main/Unity.gitignore</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">/[Ll]ibrary/</span><br><span class="line">/[Tt]emp/</span><br><span class="line">/[Oo]bj/</span><br><span class="line">/[Bb]uild/</span><br><span class="line">/[Bb]uilds/</span><br><span class="line">/[Ll]ogs/</span><br><span class="line">/[Uu]ser[Ss]ettings/</span><br><span class="line"></span><br><span class="line"><span class="comment"># MemoryCaptures can get excessive in size.</span></span><br><span class="line"><span class="comment"># They also could contain extremely sensitive data</span></span><br><span class="line">/[Mm]emoryCaptures/</span><br><span class="line"></span><br><span class="line"><span class="comment"># Recordings can get excessive in size</span></span><br><span class="line">/[Rr]ecordings/</span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment this line if you wish to ignore the asset store tools plugin</span></span><br><span class="line"><span class="comment"># /[Aa]ssets/AssetStoreTools*</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Autogenerated Jetbrains Rider plugin</span></span><br><span class="line">/[Aa]ssets/Plugins/Editor/JetBrains*</span><br><span class="line"></span><br><span class="line"><span class="comment"># Visual Studio cache directory</span></span><br><span class="line">.vs/</span><br><span class="line"></span><br><span class="line"><span class="comment"># Gradle cache directory</span></span><br><span class="line">.gradle/</span><br><span class="line"></span><br><span class="line"><span class="comment"># Autogenerated VS/MD/Consulo solution and project files</span></span><br><span class="line">ExportedObj/</span><br><span class="line">.consulo/</span><br><span class="line">*.csproj</span><br><span class="line">*.unityproj</span><br><span class="line">*.sln</span><br><span class="line">*.suo</span><br><span class="line">*.tmp</span><br><span class="line">*.user</span><br><span class="line">*.userprefs</span><br><span class="line">*.pidb</span><br><span class="line">*.booproj</span><br><span class="line">*.svd</span><br><span class="line">*.pdb</span><br><span class="line">*.mdb</span><br><span class="line">*.opendb</span><br><span class="line">*.VC.db</span><br><span class="line"></span><br><span class="line"><span class="comment"># Unity3D generated meta files</span></span><br><span class="line">*.pidb.meta</span><br><span class="line">*.pdb.meta</span><br><span class="line">*.mdb.meta</span><br><span class="line"></span><br><span class="line"><span class="comment"># Unity3D generated file on crash reports</span></span><br><span class="line">sysinfo.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># Builds</span></span><br><span class="line">*.apk</span><br><span class="line">*.aab</span><br><span class="line">*.unitypackage</span><br><span class="line">*.app</span><br><span class="line"><span class="comment"># Crashlytics generated file</span></span><br><span class="line">crashlytics-build.properties</span><br><span class="line"></span><br><span class="line"><span class="comment"># Packed Addressables</span></span><br><span class="line">/[Aa]ssets/[Aa]ddressable[Aa]ssets[Dd]ata/*/*.bin*</span><br><span class="line"></span><br><span class="line"><span class="comment"># Temporary auto-generated Android Assets</span></span><br><span class="line">/[Aa]ssets/[Ss]treamingAssets/aa.meta</span><br><span class="line">/[Aa]ssets/[Ss]treamingAssets/aa/*</span><br><span class="line"></span><br></pre></td></tr></table></figure>

</details>

<h2 id="小剧场"><a href="#小剧场" class="headerlink" title="小剧场"></a>小剧场</h2><p>大佬：不过这 直接把library放进去了有点离谱<br>小w：草率了QAQ<br>大佬：其实有一个比较稳妥的办法，就是新创一个分支，没问题了再合并。这样做还可以减少多余的commit，就是比较麻烦。<br>小w：我多余的commit估计有几千个文件改动。。。毕竟那可是把library装进去了<br>大佬：哈哈</p>
<h2 id="参考链接："><a href="#参考链接：" class="headerlink" title="参考链接："></a>参考链接：</h2><p><a target="_blank" rel="noopener" href="https://github.com/newren/git-filter-repo/blob/main/INSTALL.md">github上的安装说明</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_44871531/article/details/136802516?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522171586782016800213099308%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=171586782016800213099308&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-136802516-null-null.142^v100^pc_search_result_base7&amp;utm_term=git-filter-repo&amp;spm=1018.2226.3001.4187">csdn的一篇博客</a><br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/52885189">知乎教怎么用gitignore的</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.misaka-xxw.github.io/2024/01/22/pyqt6-sqlite3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Misaka-xxw">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Misaka-xxw的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Misaka-xxw的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/01/22/pyqt6-sqlite3/" class="post-title-link" itemprop="url">pyqt6与sqlite3的微记录</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-01-22 22:19:57" itemprop="dateCreated datePublished" datetime="2024-01-22T22:19:57+08:00">2024-01-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-21 15:27:26" itemprop="dateModified" datetime="2025-01-21T15:27:26+08:00">2025-01-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>563</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">super</span>()._init__()</span><br></pre></td></tr></table></figure>
<p>super()用来调用父类(基类)的方法，<strong>init</strong>()是类的构造方法， super().<strong>init</strong>() 就是调用父类的init方法， 同样可以使用super()去调用父类的其他方法。</p>
<h1 id="pyqt6"><a href="#pyqt6" class="headerlink" title="pyqt6"></a>pyqt6</h1><h2 id="命令行"><a href="#命令行" class="headerlink" title="命令行"></a>命令行</h2><ol>
<li>编译<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Pyinstaller -F -w -i cat.ico main.py</span><br></pre></td></tr></table></figure></li>
<li>ui文件转换成py文件<br>先进入相应文件夹，然后打开cmd，输入<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m PyQt6.uic.pyuic window.ui -o window.py</span><br></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<h1 id="sqlite3"><a href="#sqlite3" class="headerlink" title="sqlite3"></a>sqlite3</h1><p>直接将字符串插入到SQL语句中，这可能会导致SQL注入的问题。SQL注入是一种攻击，攻击者可以通过在输入字段中插入恶意的SQL代码来操纵数据库。<br>在代码中，如果传入的数据包含SQL语句，那么这些语句将会被执行，这可能会导致数据库中的数据被修改或者删除。<br>为了防止这种情况，应该使用参数化查询。</p>
<p>错误代码：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">self</span>.cur.execute(<span class="string">f&#x27;INSERT INTO <span class="subst">&#123;self.name&#125;</span> (id, English, Chinese, Phonetic) VALUES(NULL, <span class="subst">&#123;English&#125;</span>, <span class="subst">&#123;Chinese&#125;</span>, <span class="subst">&#123;Phonetic&#125;</span>)&#x27;</span>)</span><br></pre></td></tr></table></figure></p>
<p>正确代码：</p>
<h2 id=""><a href="#" class="headerlink" title=""></a><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">self</span>.cur.execute(<span class="string">f&#x27;INSERT INTO <span class="subst">&#123;self.name&#125;</span> (id, English, Chinese, Phonetic) VALUES(NULL, ?, ?, ?)&#x27;</span>, (English, Chinese, Phonetic))</span><br></pre></td></tr></table></figure></h2><h1 id="英语单词小程序——项目实现任务"><a href="#英语单词小程序——项目实现任务" class="headerlink" title="英语单词小程序——项目实现任务"></a>英语单词小程序——项目实现任务</h1><p><del>做成能用的半成品也不背单词</del></p>
<p>一. 数据库</p>
<p>(1). 单词</p>
<p>1). 增</p>
<ul>
<li>[x] 增加一个单词</li>
<li>[ ] 并且注意英语不重复</li>
<li>[ ] 根据excel表格，往单词本增加一堆单词</li>
<li>[ ] 根据相同或不同的数据库，别的单词本合并进选定的单词本</li>
</ul>
<p>2). 删</p>
<ul>
<li>[x] 在单词概览中删除一个单词，并更新</li>
<li>[ ] 在单词卡片中删除一个单词，并更新</li>
</ul>
<p>3). 改</p>
<ul>
<li>[ ] 在单词概览中点击，进入单词卡片模式，再点击可修改和保存</li>
<li>[ ] 在默写三模式中，根据对错情况修改权值</li>
</ul>
<p>4). 查</p>
<ul>
<li>[ ] 本地查询中英文</li>
<li>[ ] 联网查询中英文</li>
<li>[x] 查询全部单词</li>
</ul>
<p>(2). 单词本</p>
<p>1). 增</p>
<ul>
<li>[x] 新建一个单词本</li>
<li>[ ] 并且注意单词本名不重复</li>
<li>[ ] 根据excel表格，新建一个单词本</li>
<li>[ ] 根据相同或不同的数据库，新建一个单词本</li>
</ul>
<p>2). 删</p>
<ul>
<li>[x] 删除一个单词本</li>
</ul>
<p>3). 改</p>
<ul>
<li>[ ] 修改单词本名</li>
</ul>
<p>4). 查</p>
<ul>
<li>[x] 查询所有单词本名字</li>
<li>[ ] 查询单词本单词总数</li>
<li>[ ] 根据权重，随机选取单词本中单词</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Misaka-xxw</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">64k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">3:53</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/Misaka-xxw" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"misaka-xxw","repo":"misaka-xxw.github.io","client_id":"Ov23liNWqCyoWMWQ8Qrm","client_secret":"2972e4f4b47100b82f2aaf4023919d3f8d22b7cd","admin_user":"misaka-xxw","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"dbb1aad0300bb8f37fa677175e85a293"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
