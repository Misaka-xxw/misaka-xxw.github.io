<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.misaka-xxw.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.22.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":{"gitalk":{"order":-1}},"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="h6 {     background-color: pink; } h1 {     text-align: center; }    计科期末考试出题 读程序题 程序填空题 写程序题：计算 写程序题：循环分支 写程序题：中断   第3章 80x86的指令系统和寻址方式80x86的寻址方式…  80x86的指令系统数据传送指令(p47)通用数据传送指令mov mov mem&#x2F;reg1,mem&#x2F;">
<meta property="og:type" content="article">
<meta property="og:title" content="汇编语言期末笔记">
<meta property="og:url" content="http://www.misaka-xxw.github.io/2025/01/01/assembly_exam_note/index.html">
<meta property="og:site_name" content="Misaka-xxw的博客">
<meta property="og:description" content="h6 {     background-color: pink; } h1 {     text-align: center; }    计科期末考试出题 读程序题 程序填空题 写程序题：计算 写程序题：循环分支 写程序题：中断   第3章 80x86的指令系统和寻址方式80x86的寻址方式…  80x86的指令系统数据传送指令(p47)通用数据传送指令mov mov mem&#x2F;reg1,mem&#x2F;">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://www.misaka-xxw.github.io/2025/01/01/assembly_exam_note/push_ds.png">
<meta property="article:published_time" content="2025-01-01T11:29:07.000Z">
<meta property="article:modified_time" content="2025-01-21T06:35:36.831Z">
<meta property="article:author" content="Misaka-xxw">
<meta property="article:tag" content="汇编">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.misaka-xxw.github.io/2025/01/01/assembly_exam_note/push_ds.png">


<link rel="canonical" href="http://www.misaka-xxw.github.io/2025/01/01/assembly_exam_note/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://www.misaka-xxw.github.io/2025/01/01/assembly_exam_note/","path":"2025/01/01/assembly_exam_note/","title":"汇编语言期末笔记"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>汇编语言期末笔记 | Misaka-xxw的博客</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Misaka-xxw的博客</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">昨日种种，皆成今我</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AE%A1%E7%A7%91%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95%E5%87%BA%E9%A2%98"><span class="nav-number">1.</span> <span class="nav-text">计科期末考试出题</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC3%E7%AB%A0-80x86%E7%9A%84%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F%E5%92%8C%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F"><span class="nav-number">2.</span> <span class="nav-text">第3章 80x86的指令系统和寻址方式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#80x86%E7%9A%84%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F"><span class="nav-number">2.1.</span> <span class="nav-text">80x86的寻址方式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#80x86%E7%9A%84%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F"><span class="nav-number">2.2.</span> <span class="nav-text">80x86的指令系统</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4-p47"><span class="nav-number">2.2.1.</span> <span class="nav-text">数据传送指令(p47)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E7%94%A8%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.1.1.</span> <span class="nav-text">通用数据传送指令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#mov"><span class="nav-number">2.2.1.1.1.</span> <span class="nav-text">mov</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#push%E8%BF%9B%E6%A0%88%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.1.1.2.</span> <span class="nav-text">push进栈指令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#pop%E5%87%BA%E6%A0%88%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.1.1.3.</span> <span class="nav-text">pop出栈指令</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B4%AF%E5%8A%A0%E5%99%A8%E4%B8%93%E7%94%A8%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.1.2.</span> <span class="nav-text">累加器专用传送指令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#in"><span class="nav-number">2.2.1.2.1.</span> <span class="nav-text">in</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#out"><span class="nav-number">2.2.1.2.2.</span> <span class="nav-text">out</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#xlat%E6%8D%A2%E7%A0%81%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.1.2.3.</span> <span class="nav-text">xlat换码指令</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%B0%E5%9D%80%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.1.3.</span> <span class="nav-text">地址传送指令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#lea%E6%9C%89%E6%95%88%E5%9C%B0%E5%9D%80%E9%80%81%E5%AF%84%E5%AD%98%E5%99%A8"><span class="nav-number">2.2.1.3.1.</span> <span class="nav-text">lea有效地址送寄存器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#lds-les-lfs-lgs-lss%E6%8C%87%E9%92%88%E9%80%81%E5%AF%84%E5%AD%98%E5%99%A8%E5%92%8C-s"><span class="nav-number">2.2.1.3.2.</span> <span class="nav-text">lds, les, lfs, lgs, lss指针送寄存器和?s</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A0%87%E5%BF%97%E5%AF%84%E5%AD%98%E5%99%A8%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.1.3.3.</span> <span class="nav-text">标志寄存器传送指令</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.1.4.</span> <span class="nav-text">类型转换指令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#cbw"><span class="nav-number">2.2.1.4.1.</span> <span class="nav-text">cbw</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#cwd-cwde"><span class="nav-number">2.2.1.4.2.</span> <span class="nav-text">cwd&#x2F;cwde</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%97%E6%9C%AF%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.2.</span> <span class="nav-text">算术指令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8A%A0%E6%B3%95%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.2.1.</span> <span class="nav-text">加法指令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#add%E5%8A%A0%E6%B3%95"><span class="nav-number">2.2.2.1.1.</span> <span class="nav-text">add加法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#adc%E5%B8%A6%E8%BF%9B%E4%BD%8D%E5%8A%A0%E6%B3%95"><span class="nav-number">2.2.2.1.2.</span> <span class="nav-text">adc带进位加法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#inc-%E5%8A%A01%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.2.1.3.</span> <span class="nav-text">inc 加1指令</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%87%8F%E6%B3%95%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.2.2.</span> <span class="nav-text">减法指令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#sub%E5%87%8F%E6%B3%95"><span class="nav-number">2.2.2.2.1.</span> <span class="nav-text">sub减法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#sbb%E5%B8%A6%E5%80%9F%E4%BD%8D%E5%87%8F%E6%B3%95"><span class="nav-number">2.2.2.2.2.</span> <span class="nav-text">sbb带借位减法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#dec%E5%87%8F1"><span class="nav-number">2.2.2.2.3.</span> <span class="nav-text">dec减1</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#neg%E6%B1%82%E8%A1%A5"><span class="nav-number">2.2.2.2.4.</span> <span class="nav-text">neg求补</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#cmp%E6%AF%94%E8%BE%83"><span class="nav-number">2.2.2.2.5.</span> <span class="nav-text">cmp比较</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B9%98%E6%B3%95%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.2.3.</span> <span class="nav-text">乘法指令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#mul%E6%97%A0%E7%AC%A6%E5%8F%B7%E6%95%B0%E4%B9%98%E6%B3%95"><span class="nav-number">2.2.2.3.1.</span> <span class="nav-text">mul无符号数乘法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#imul%E5%B8%A6%E7%AC%A6%E5%8F%B7%E6%95%B0%E4%B9%98%E6%B3%95"><span class="nav-number">2.2.2.3.2.</span> <span class="nav-text">imul带符号数乘法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%99%A4%E6%B3%95%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.2.4.</span> <span class="nav-text">除法指令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#div%E6%97%A0%E7%AC%A6%E5%8F%B7%E6%95%B0%E9%99%A4%E6%B3%95"><span class="nav-number">2.2.2.4.1.</span> <span class="nav-text">div无符号数除法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#idiv%E5%B8%A6%E7%AC%A6%E5%8F%B7%E6%95%B0%E9%99%A4%E6%B3%95"><span class="nav-number">2.2.2.4.2.</span> <span class="nav-text">idiv带符号数除法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8D%81%E8%BF%9B%E5%88%B6%E8%B0%83%E6%95%B4%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.2.5.</span> <span class="nav-text">十进制调整指令</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.3.</span> <span class="nav-text">逻辑指令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.3.1.</span> <span class="nav-text">逻辑运算指令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#and-%E9%80%BB%E8%BE%91%E4%B8%8E%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.3.1.1.</span> <span class="nav-text">and 逻辑与指令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#or-%E9%80%BB%E8%BE%91%E6%88%96%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.3.1.2.</span> <span class="nav-text">or 逻辑或指令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#not-%E9%80%BB%E8%BE%91%E9%9D%9E%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.3.1.3.</span> <span class="nav-text">not 逻辑非指令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#xor-%E5%BC%82%E6%88%96%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.3.1.4.</span> <span class="nav-text">xor 异或指令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#test-%E6%B5%8B%E8%AF%95%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.3.1.5.</span> <span class="nav-text">test 测试指令</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A7%BB%E4%BD%8D%E6%8C%87%E4%BB%A4-p73"><span class="nav-number">2.2.3.2.</span> <span class="nav-text">移位指令(p73)</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#shl-%E9%80%BB%E8%BE%91%E5%B7%A6%E7%A7%BB%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.3.2.1.</span> <span class="nav-text">shl 逻辑左移指令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#sal-%E7%AE%97%E6%95%B0%E5%B7%A6%E7%A7%BB%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.3.2.2.</span> <span class="nav-text">sal 算数左移指令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#shr-%E9%80%BB%E8%BE%91%E5%8F%B3%E7%A7%BB%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.3.2.3.</span> <span class="nav-text">shr 逻辑右移指令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#sal-%E7%AE%97%E6%95%B0%E5%8F%B3%E7%A7%BB%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.3.2.4.</span> <span class="nav-text">sal 算数右移指令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#rol-%E5%BE%AA%E7%8E%AF%E5%B7%A6%E7%A7%BB%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.3.2.5.</span> <span class="nav-text">rol 循环左移指令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ror-%E5%BE%AA%E7%8E%AF%E5%8F%B3%E7%A7%BB%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.3.2.6.</span> <span class="nav-text">ror 循环右移指令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#rcl-%E5%B8%A6%E8%BF%9B%E4%BD%8D%E5%BE%AA%E7%8E%AF%E5%B7%A6%E7%A7%BB%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.3.2.7.</span> <span class="nav-text">rcl 带进位循环左移指令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#rcr-%E5%B8%A6%E8%BF%9B%E4%BD%8D%E5%BE%AA%E7%8E%AF%E5%8F%B3%E7%A7%BB%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.3.2.8.</span> <span class="nav-text">rcr 带进位循环右移指令</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%B2%E5%A4%84%E7%90%86%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.4.</span> <span class="nav-text">串处理指令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8Erep%E7%9B%B8%E9%85%8D%E5%90%88%E5%B7%A5%E4%BD%9C%E7%9A%84movs-stos-lods-ins-outs"><span class="nav-number">2.2.4.1.</span> <span class="nav-text">与rep相配合工作的movs, stos, lods, ins, outs</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#rep%E9%87%8D%E5%A4%8D%E4%B8%B2%E6%93%8D%E4%BD%9C"><span class="nav-number">2.2.4.1.1.</span> <span class="nav-text">rep重复串操作</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#movs-%E4%B8%B2%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.4.1.2.</span> <span class="nav-text">movs 串传送指令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#stos-%E5%AD%98%E5%85%A5%E4%B8%B2%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.4.1.3.</span> <span class="nav-text">stos 存入串指令</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#lods-%E4%BB%8E%E4%B8%B2%E5%8F%96%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.4.2.</span> <span class="nav-text">lods 从串取指令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ins-%E4%B8%B2%E8%BE%93%E5%85%A5"><span class="nav-number">2.2.4.3.</span> <span class="nav-text">ins 串输入</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#outs-%E4%B8%B2%E8%BE%93%E5%87%BA"><span class="nav-number">2.2.4.4.</span> <span class="nav-text">outs 串输出</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#repe-repz-repne-repnz-cmps-scas"><span class="nav-number">2.2.4.5.</span> <span class="nav-text">repe&#x2F;repz,repne&#x2F;repnz,cmps,scas</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#repe-repz-%E4%B8%BA%E7%9B%B8%E7%AD%89-%E4%B8%BA%E9%9B%B6%E6%97%B6%E9%87%8D%E5%A4%8D%E4%B8%B2%E6%93%8D%E4%BD%9C"><span class="nav-number">2.2.4.5.1.</span> <span class="nav-text">repe&#x2F;repz 为相等&#x2F;为零时重复串操作</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#repne-repnz-%E4%B8%BA%E4%B8%8D%E7%9B%B8%E7%AD%89-%E4%B8%8D%E4%B8%BA%E9%9B%B6%E6%97%B6%E9%87%8D%E5%A4%8D%E4%B8%B2%E6%93%8D%E4%BD%9C"><span class="nav-number">2.2.4.5.2.</span> <span class="nav-text">repne&#x2F;repnz 为不相等&#x2F;不为零时重复串操作</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#cmps-%E4%B8%B2%E6%AF%94%E8%BE%83%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.4.5.3.</span> <span class="nav-text">cmps 串比较指令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#scas%E4%B8%B2%E6%89%AB%E6%8F%8F%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.4.5.4.</span> <span class="nav-text">scas串扫描指令</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A7%E5%88%B6%E8%BD%AC%E7%A7%BB%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.5.</span> <span class="nav-text">控制转移指令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%97%A0%E6%9D%A1%E4%BB%B6%E8%BD%AC%E7%A7%BB%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.5.1.</span> <span class="nav-text">无条件转移指令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E8%BD%AC%E7%A7%BB%E6%8C%87%E4%BB%A4-p89"><span class="nav-number">2.2.5.2.</span> <span class="nav-text">条件转移指令(p89)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BE%AA%E7%8E%AF%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.5.3.</span> <span class="nav-text">循环指令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#loop"><span class="nav-number">2.2.5.3.1.</span> <span class="nav-text">loop</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#loopz-loope"><span class="nav-number">2.2.5.3.2.</span> <span class="nav-text">loopz&#x2F;loope</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#loopnz-loopne"><span class="nav-number">2.2.5.3.3.</span> <span class="nav-text">loopnz&#x2F;loopne</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%90%E7%A8%8B%E5%BA%8F"><span class="nav-number">2.2.5.4.</span> <span class="nav-text">子程序</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#call"><span class="nav-number">2.2.5.4.1.</span> <span class="nav-text">call</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ret"><span class="nav-number">2.2.5.4.2.</span> <span class="nav-text">ret</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC8%E7%AB%A0-%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1"><span class="nav-number">3.</span> <span class="nav-text">第8章 输入输出程序设计</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A8%8B%E5%BA%8F%E7%9B%B4%E6%8E%A5%E6%8E%A7%E5%88%B6I-O%E6%96%B9%E5%BC%8F-p283"><span class="nav-number">3.1.</span> <span class="nav-text">程序直接控制I&#x2F;O方式(p283)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#I-O%E6%8C%87%E4%BB%A4-p284"><span class="nav-number">3.1.1.</span> <span class="nav-text">I&#x2F;O指令(p284)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%AD%E6%96%AD%E4%BC%A0%E9%80%81%E6%96%B9%E5%BC%8F"><span class="nav-number">3.2.</span> <span class="nav-text">中断传送方式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#8086%E7%9A%84%E4%B8%AD%E6%96%AD%E5%88%86%E7%B1%BB-p290"><span class="nav-number">3.2.1.</span> <span class="nav-text">8086的中断分类(p290)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%AD%E6%96%AD%E5%90%91%E9%87%8F%E8%A1%A8-p293"><span class="nav-number">3.2.2.</span> <span class="nav-text">中断向量表(p293)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#p301%E5%93%8D%E9%93%83%E7%A8%8B%E5%BA%8F"><span class="nav-number">3.2.2.1.</span> <span class="nav-text">p301响铃程序</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%A0%86%E6%A0%88%E6%83%85%E5%86%B5"><span class="nav-number">4.</span> <span class="nav-text">堆栈情况</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%99%84%E5%BD%95-DOS%E7%B3%BB%E7%BB%9F%E5%8A%9F%E8%83%BD%E8%B0%83%E7%94%A8%EF%BC%88%E5%B8%B8%E7%94%A8%EF%BC%89"><span class="nav-number">5.</span> <span class="nav-text">附录 DOS系统功能调用（常用）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8debug-%E5%AE%9E%E9%AA%8C%E4%B9%A6p186"><span class="nav-number">6.</span> <span class="nav-text">常用debug(实验书p186)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%9E%E9%AA%8C%E4%BB%A3%E7%A0%81"><span class="nav-number">7.</span> <span class="nav-text">实验代码</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%88%90%E7%BB%A9%E6%8E%92%E5%90%8D"><span class="nav-number">7.1.</span> <span class="nav-text">成绩排名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ASCII%E7%A0%81%E8%A1%A8"><span class="nav-number">7.2.</span> <span class="nav-text">ASCII码表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%8D%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">7.3.</span> <span class="nav-text">反转字符串</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E6%89%BE%E5%AD%90%E4%B8%B2%E4%BD%8D%E7%BD%AE%EF%BC%8C%E5%8D%81%E8%BF%9B%E5%88%B6%E3%80%81%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6%E8%BE%93%E5%87%BA"><span class="nav-number">7.4.</span> <span class="nav-text">查找子串位置，十进制、十六进制输出</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Misaka-xxw</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">19</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">23</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.misaka-xxw.github.io/2025/01/01/assembly_exam_note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Misaka-xxw">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Misaka-xxw的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="汇编语言期末笔记 | Misaka-xxw的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          汇编语言期末笔记
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-01-01 19:29:07" itemprop="dateCreated datePublished" datetime="2025-01-01T19:29:07+08:00">2025-01-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-21 14:35:36" itemprop="dateModified" datetime="2025-01-21T14:35:36+08:00">2025-01-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%B1%87%E7%BC%96/" itemprop="url" rel="index"><span itemprop="name">汇编</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.5k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>17 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><style>
h6 {
    background-color: pink;
}
h1 {
    text-align: center;
}
</style>

<hr>
<h1 id="计科期末考试出题"><a href="#计科期末考试出题" class="headerlink" title="计科期末考试出题"></a>计科期末考试出题</h1><ol>
<li>读程序题</li>
<li>程序填空题</li>
<li>写程序题：计算</li>
<li>写程序题：循环分支</li>
<li>写程序题：中断</li>
</ol>
<hr>
<h1 id="第3章-80x86的指令系统和寻址方式"><a href="#第3章-80x86的指令系统和寻址方式" class="headerlink" title="第3章 80x86的指令系统和寻址方式"></a>第3章 80x86的指令系统和寻址方式</h1><h2 id="80x86的寻址方式"><a href="#80x86的寻址方式" class="headerlink" title="80x86的寻址方式"></a>80x86的寻址方式</h2><p>…</p>
<hr>
<h2 id="80x86的指令系统"><a href="#80x86的指令系统" class="headerlink" title="80x86的指令系统"></a>80x86的指令系统</h2><h3 id="数据传送指令-p47"><a href="#数据传送指令-p47" class="headerlink" title="数据传送指令(p47)"></a>数据传送指令(p47)</h3><h4 id="通用数据传送指令"><a href="#通用数据传送指令" class="headerlink" title="通用数据传送指令"></a>通用数据传送指令</h4><h5 id="mov"><a href="#mov" class="headerlink" title="mov"></a>mov</h5><ol>
<li>mov mem/reg1,mem/reg2<br><span style="color:red">先略。。。直接看书</span></li>
</ol>
<h5 id="push进栈指令"><a href="#push进栈指令" class="headerlink" title="push进栈指令"></a>push进栈指令</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">push src</span><br></pre></td></tr></table></figure>
<p>(sp) ← (sp)-2<br>((sp)+1,(sp)) ← (src)</p>
<p><strong>格式</strong></p>
<p>push reg<br>push mem<br><del>push data</del>8086不行<br>push segreg</p>
<details>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">push ax      ; 推送 AX 寄存器</span><br><span class="line">push bx      ; 推送 BX 寄存器</span><br><span class="line">push cx      ; 推送 CX 寄存器</span><br><span class="line">push dx      ; 推送 DX 寄存器</span><br><span class="line">push sp      ; 推送 SP 寄存器</span><br><span class="line">push bp      ; 推送 BP 寄存器</span><br><span class="line">push si      ; 推送 SI 寄存器</span><br><span class="line">push di      ; 推送 DI 寄存器</span><br><span class="line"></span><br><span class="line">push word ptr [address]  ; 推送内存地址中的值</span><br><span class="line"></span><br><span class="line">push cs      ; 推送 CS 段寄存器</span><br><span class="line">push ds      ; 推送 DS 段寄存器</span><br><span class="line">push es      ; 推送 ES 段寄存器</span><br><span class="line">push ss      ; 推送 SS 段寄存器</span><br></pre></td></tr></table></figure>

</details>

<h5 id="pop出栈指令"><a href="#pop出栈指令" class="headerlink" title="pop出栈指令"></a>pop出栈指令</h5><p><span style="color:red">注意要画栈图</span></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pop dst</span><br></pre></td></tr></table></figure>
<p>(dst) ← ((sp)+1,(sp))<br>(sp) ← (sp)+2</p>
<p>pop reg<br>pop mem<br><del>pop data</del>8086不行<br>pop segreg</p>
<h4 id="累加器专用传送指令"><a href="#累加器专用传送指令" class="headerlink" title="累加器专用传送指令"></a>累加器专用传送指令</h4><p>这些指令不影响标志位</p>
<h5 id="in"><a href="#in" class="headerlink" title="in"></a>in</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">in al,port ;字节, (al) ← (port)</span><br><span class="line">in ax,port ;字, (ax) ← (port+1,port)</span><br><span class="line">in al,dx   ;字节, (al) ← ((dx))</span><br><span class="line">in ax,dx   ;字, (ax) ← ((dx)+1,(dx))</span><br></pre></td></tr></table></figure>
<h5 id="out"><a href="#out" class="headerlink" title="out"></a>out</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">out port,al ;字节, port ← (al)</span><br><span class="line">out port,ax ;字, (port+1,port) ← (ax)</span><br><span class="line">out dx,al   ;字节, ((dx)) ← (al)</span><br><span class="line">out dx,ax   ;字, ((dx)+1,(dx)) ← (ax)</span><br></pre></td></tr></table></figure>
<h5 id="xlat换码指令"><a href="#xlat换码指令" class="headerlink" title="xlat换码指令"></a>xlat换码指令</h5><p>al=[bx+al]</p>
<h4 id="地址传送指令"><a href="#地址传送指令" class="headerlink" title="地址传送指令"></a>地址传送指令</h4><h5 id="lea有效地址送寄存器"><a href="#lea有效地址送寄存器" class="headerlink" title="lea有效地址送寄存器"></a>lea有效地址送寄存器</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lea reg,sec ;(reg)&lt;-src</span><br></pre></td></tr></table></figure>
<p>异同：<code>lea bx,list</code> ≈ <code>mov bx,offset list</code>, <code>mov</code>更快</p>
<h5 id="lds-les-lfs-lgs-lss指针送寄存器和-s"><a href="#lds-les-lfs-lgs-lss指针送寄存器和-s" class="headerlink" title="lds, les, lfs, lgs, lss指针送寄存器和?s"></a>lds, les, lfs, lgs, lss指针送寄存器和?s</h5><p>p56, 实验暂时不用</p>
<h5 id="标志寄存器传送指令"><a href="#标志寄存器传送指令" class="headerlink" title="标志寄存器传送指令"></a>标志寄存器传送指令</h5><p>p57, 实验暂时不用</p>
<h4 id="类型转换指令"><a href="#类型转换指令" class="headerlink" title="类型转换指令"></a>类型转换指令</h4><h5 id="cbw"><a href="#cbw" class="headerlink" title="cbw"></a>cbw</h5><p>将al的内容符号扩展到ah，形成ax的字。<br>若(AL)的最高有效位为0，则(AH)= 00H<br>若(AL)的最高有效位为1，则(AH)= 0FFH</p>
<h5 id="cwd-cwde"><a href="#cwd-cwde" class="headerlink" title="cwd/cwde"></a>cwd/cwde</h5><p>将ax的内容符号扩展到dx，形成dx:ax中的双字。<br>若(AX)的最高有效位为0，则(DX) = 0000H<br>若(AX)的最高有效位为1，则(DX) = 0FFFFH</p>
<hr>
<h3 id="算术指令"><a href="#算术指令" class="headerlink" title="算术指令"></a>算术指令</h3><h4 id="加法指令"><a href="#加法指令" class="headerlink" title="加法指令"></a>加法指令</h4><h5 id="add加法"><a href="#add加法" class="headerlink" title="add加法"></a>add加法</h5><h5 id="adc带进位加法"><a href="#adc带进位加法" class="headerlink" title="adc带进位加法"></a>adc带进位加法</h5><h5 id="inc-加1指令"><a href="#inc-加1指令" class="headerlink" title="inc 加1指令"></a>inc 加1指令</h5><h4 id="减法指令"><a href="#减法指令" class="headerlink" title="减法指令"></a>减法指令</h4><h5 id="sub减法"><a href="#sub减法" class="headerlink" title="sub减法"></a>sub减法</h5><h5 id="sbb带借位减法"><a href="#sbb带借位减法" class="headerlink" title="sbb带借位减法"></a>sbb带借位减法</h5><h5 id="dec减1"><a href="#dec减1" class="headerlink" title="dec减1"></a>dec减1</h5><h5 id="neg求补"><a href="#neg求补" class="headerlink" title="neg求补"></a>neg求补</h5><p>按位求反+1</p>
<h5 id="cmp比较"><a href="#cmp比较" class="headerlink" title="cmp比较"></a>cmp比较</h5><p>前操作数-后操作数，但是不保存结果，只设置条件标志位</p>
<h4 id="乘法指令"><a href="#乘法指令" class="headerlink" title="乘法指令"></a>乘法指令</h4><p>目的操作数必须是累加器</p>
<h5 id="mul无符号数乘法"><a href="#mul无符号数乘法" class="headerlink" title="mul无符号数乘法"></a>mul无符号数乘法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mul src</span><br></pre></td></tr></table></figure>
<p>(ax)&lt;-(al)<em>(src)    ;字节操作数<br>(dx,ax)&lt;-(ax)</em>(src) ;字操作数</p>
<h5 id="imul带符号数乘法"><a href="#imul带符号数乘法" class="headerlink" title="imul带符号数乘法"></a>imul带符号数乘法</h5><p>同上，但是是带符号数</p>
<h4 id="除法指令"><a href="#除法指令" class="headerlink" title="除法指令"></a>除法指令</h4><h5 id="div无符号数除法"><a href="#div无符号数除法" class="headerlink" title="div无符号数除法"></a>div无符号数除法</h5><p><code>div src</code></p>
<p>字节操作：<br>(ax)/(src)=(al)……(ah)<br>字操作：<br>(dx,ax)/(src)=(ax)……(dx)<br><span style="color:red">注意进制转换的代码</span></p>
<h5 id="idiv带符号数除法"><a href="#idiv带符号数除法" class="headerlink" title="idiv带符号数除法"></a>idiv带符号数除法</h5><p>同上</p>
<h4 id="十进制调整指令"><a href="#十进制调整指令" class="headerlink" title="十进制调整指令"></a>十进制调整指令</h4><p>有压缩的BCD码调整指令：<br>DAA 加法的十进制调整指令<br>DAS 减法的十进制调整指令</p>
<p>非压缩的BCD码调整指令：<br>AAA 加法的ASCII调整指令<br>AAS 减法的ASCII调整指令<br>AAM 乘法的ASCII调整指令<br>AAD 除法的ASCII调整指令</p>
<h3 id="逻辑指令"><a href="#逻辑指令" class="headerlink" title="逻辑指令"></a>逻辑指令</h3><h4 id="逻辑运算指令"><a href="#逻辑运算指令" class="headerlink" title="逻辑运算指令"></a>逻辑运算指令</h4><h5 id="and-逻辑与指令"><a href="#and-逻辑与指令" class="headerlink" title="and 逻辑与指令"></a>and 逻辑与指令</h5><h5 id="or-逻辑或指令"><a href="#or-逻辑或指令" class="headerlink" title="or 逻辑或指令"></a>or 逻辑或指令</h5><h5 id="not-逻辑非指令"><a href="#not-逻辑非指令" class="headerlink" title="not 逻辑非指令"></a>not 逻辑非指令</h5><h5 id="xor-异或指令"><a href="#xor-异或指令" class="headerlink" title="xor 异或指令"></a>xor 异或指令</h5><p>要使操作数的某些位变反，使用xor，那些位设为1</p>
<h5 id="test-测试指令"><a href="#test-测试指令" class="headerlink" title="test 测试指令"></a>test 测试指令</h5><p>做and运算，但是不保存结果，只置条件码<br>要测试操作数的某位是都为1，可以先将操作数取反，再用test测试。</p>
<h4 id="移位指令-p73"><a href="#移位指令-p73" class="headerlink" title="移位指令(p73)"></a>移位指令(p73)</h4><p>e.g. <code>shl opr,cnt</code><br>在8086中，<code>cnt</code>可以是<code>cl</code>或者<code>1</code></p>
<h5 id="shl-逻辑左移指令"><a href="#shl-逻辑左移指令" class="headerlink" title="shl 逻辑左移指令"></a>shl 逻辑左移指令</h5><p>无符号数乘法</p>
<h5 id="sal-算数左移指令"><a href="#sal-算数左移指令" class="headerlink" title="sal 算数左移指令"></a>sal 算数左移指令</h5><p>有符号数乘法</p>
<h5 id="shr-逻辑右移指令"><a href="#shr-逻辑右移指令" class="headerlink" title="shr 逻辑右移指令"></a>shr 逻辑右移指令</h5><p>无符号数除法</p>
<h5 id="sal-算数右移指令"><a href="#sal-算数右移指令" class="headerlink" title="sal 算数右移指令"></a>sal 算数右移指令</h5><p>有符号数除法</p>
<h5 id="rol-循环左移指令"><a href="#rol-循环左移指令" class="headerlink" title="rol 循环左移指令"></a>rol 循环左移指令</h5><h5 id="ror-循环右移指令"><a href="#ror-循环右移指令" class="headerlink" title="ror 循环右移指令"></a>ror 循环右移指令</h5><h5 id="rcl-带进位循环左移指令"><a href="#rcl-带进位循环左移指令" class="headerlink" title="rcl 带进位循环左移指令"></a>rcl 带进位循环左移指令</h5><h5 id="rcr-带进位循环右移指令"><a href="#rcr-带进位循环右移指令" class="headerlink" title="rcr 带进位循环右移指令"></a>rcr 带进位循环右移指令</h5><h3 id="串处理指令"><a href="#串处理指令" class="headerlink" title="串处理指令"></a>串处理指令</h3><p><span style="color:red">这里要写一下字符串代码</span></p>
<h4 id="与rep相配合工作的movs-stos-lods-ins-outs"><a href="#与rep相配合工作的movs-stos-lods-ins-outs" class="headerlink" title="与rep相配合工作的movs, stos, lods, ins, outs"></a>与rep相配合工作的movs, stos, lods, ins, outs</h4><h5 id="rep重复串操作"><a href="#rep重复串操作" class="headerlink" title="rep重复串操作"></a>rep重复串操作</h5><p>重复串操作直到计数器Count Reg的内容为0位为止<br>操作：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> Count_Reg != <span class="number">0</span>:</span><br><span class="line">    Count_Reg-=<span class="number">1</span></span><br><span class="line">    执行后面的串指令</span><br></pre></td></tr></table></figure>
<h5 id="movs-串传送指令"><a href="#movs-串传送指令" class="headerlink" title="movs 串传送指令"></a>movs 串传送指令</h5><p>格式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">movs dst,src</span><br><span class="line">movsb ;字节</span><br><span class="line">movsw ;字</span><br></pre></td></tr></table></figure>
<p>第一种格式要在操作数里标名是字还是字节操作。<br><code>movs  es:byte ptr[di],ds:[si]</code></p>
<p><strong>相当于<code>strcpy</code></strong><br>movs可以把由<strong>源变址寄存器</strong>指向的数据段中的一个字（或字节），传到<strong>目的变址寄存器</strong>指向的附加段中的一个字（或字节）去，同时根据<strong>方向标志</strong>以及数据格式（字or字节），对源变址寄存器和目的变址寄存器进行修改。</p>
<p>执行操作：</p>
<ol>
<li>((DI)) ← ((SI))</li>
<li>字节操作：(SI)←(SI)±1,  (DI)←(DI)±1<br>字操作：  (SI)←(SI)±2,  (DI)←(DI)±2<br>方向标志DF=0时用 +，DF=1时用 - 。</li>
</ol>
<p>执行REP MOVS之前，应先做好：</p>
<ol>
<li>源串首地址（末地址）→ SI</li>
<li>目的串首地址（末地址）→ DI</li>
<li>串长度 → CX</li>
<li>建立方向标志（CLD使DF=0，STD使DF=1）</li>
</ol>
<p><mark><strong>方向标志</strong></mark></p>
<ul>
<li><code>cld</code>: df=0, 地址自动增量</li>
<li><code>std</code>: df=1, 地址自动减量</li>
</ul>
<h5 id="stos-存入串指令"><a href="#stos-存入串指令" class="headerlink" title="stos 存入串指令"></a>stos 存入串指令</h5><p>格式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">stos dst</span><br><span class="line">stosb ;字节</span><br><span class="line">stosw ;字</span><br></pre></td></tr></table></figure>
<p><strong>相当于<code>memset</code></strong><br>将al、ax的内容存入由<strong>目的变址寄存器</strong>指向的附加段的某单元中，并根据……<br><strong>初始化某一个缓冲区</strong>时很有用</p>
<p>执行操作：</p>
<ol>
<li>字节操作：((DI))←(AL),  (DI)←(DI)±1</li>
<li>字操作：((DI))←(AX),  (DI)←(DI)±2</li>
</ol>
<p>例：把附加段中的5个字节缓冲区置为20H</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lea  di, mess2</span><br><span class="line">mov  al, 20H</span><br><span class="line">mov  cx, 5</span><br><span class="line">cld</span><br><span class="line">rep  stosb</span><br></pre></td></tr></table></figure>
<h4 id="lods-从串取指令"><a href="#lods-从串取指令" class="headerlink" title="lods 从串取指令"></a>lods 从串取指令</h4><p>格式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lods src</span><br><span class="line">lodsb ;字节</span><br><span class="line">lodsw ;字</span><br></pre></td></tr></table></figure>
<p>LODS指令一般不与REP联用<br>源串必须在数据段中，目的串必须在附加段中，<br>但源串允许使用段跨越前缀来修改。<br>不影响条件标志位</p>
<p>执行操作：<br>字节操作：(AL)←((SI)),(SI)←(SI)±1<br>字操作：(AX)←((SI)),(SI)←(SI)±2</p>
<h4 id="ins-串输入"><a href="#ins-串输入" class="headerlink" title="ins 串输入"></a>ins 串输入</h4><p>格式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ins dst,dx</span><br><span class="line">insb ;字节</span><br><span class="line">insw ;字</span><br></pre></td></tr></table></figure>
<p>执行操作：<br>字节操作：(DI)←((DX)), (DI)←(DI)±1<br>字操作：(DI+1,DI)←((DX)), (DI)←(DI)±2</p>
<h4 id="outs-串输出"><a href="#outs-串输出" class="headerlink" title="outs 串输出"></a>outs 串输出</h4><p>格式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">outs dx,src</span><br><span class="line">outsb ;字节</span><br><span class="line">outsw ;字</span><br></pre></td></tr></table></figure>
<p>执行操作：<br>字节操作：((DX)) ← (SI),  (SI)←(SI)±1<br>字操作：((DX)) ←(SI+1，SI),  (SI)←(SI)±2</p>
<h4 id="repe-repz-repne-repnz-cmps-scas"><a href="#repe-repz-repne-repnz-cmps-scas" class="headerlink" title="repe/repz,repne/repnz,cmps,scas"></a>repe/repz,repne/repnz,cmps,scas</h4><h5 id="repe-repz-为相等-为零时重复串操作"><a href="#repe-repz-为相等-为零时重复串操作" class="headerlink" title="repe/repz 为相等/为零时重复串操作"></a>repe/repz 为相等/为零时重复串操作</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> Count_Reg!=<span class="number">0</span> <span class="keyword">and</span> zf!=<span class="number">0</span>:</span><br><span class="line">    Count_Reg-=<span class="number">1</span></span><br><span class="line">    执行其后的串指令</span><br></pre></td></tr></table></figure>
<h5 id="repne-repnz-为不相等-不为零时重复串操作"><a href="#repne-repnz-为不相等-不为零时重复串操作" class="headerlink" title="repne/repnz 为不相等/不为零时重复串操作"></a>repne/repnz 为不相等/不为零时重复串操作</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> Count_Reg!=<span class="number">0</span> <span class="keyword">and</span> zf!=<span class="number">1</span>:</span><br><span class="line">    Count_Reg-=<span class="number">1</span></span><br><span class="line">    执行其后的串指令</span><br></pre></td></tr></table></figure>
<h5 id="cmps-串比较指令"><a href="#cmps-串比较指令" class="headerlink" title="cmps 串比较指令"></a>cmps 串比较指令</h5><p>格式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cmps src,dst</span><br><span class="line">cmpsb ;字节</span><br><span class="line">cmpsw ;字</span><br></pre></td></tr></table></figure>
<p><strong>相当于<code>strcmp</code></strong></p>
<p>执行操作：<br>(1) ((SI)) - ((DI))<br>根据比较结果设置条件标志位：相等 ZF=1<br>(2) 字节操作：(SI)←(SI)±1,  (DI)←(DI)±1<br>字操作：(SI)←(SI)±2,  (DI)←(DI)±2</p>
<h5 id="scas串扫描指令"><a href="#scas串扫描指令" class="headerlink" title="scas串扫描指令"></a>scas串扫描指令</h5><p>格式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scas dst</span><br><span class="line">scasb ;字节</span><br><span class="line">scasw ;字</span><br></pre></td></tr></table></figure>
<p>执行操作：<br>字节操作：(AL) - ((DI)),  (DI)←(DI)±1<br>字操作：(AX) - ((DI)),  (DI)←(DI)±2</p>
<h3 id="控制转移指令"><a href="#控制转移指令" class="headerlink" title="控制转移指令"></a>控制转移指令</h3><p><span>后面再看</span></p>
<h4 id="无条件转移指令"><a href="#无条件转移指令" class="headerlink" title="无条件转移指令"></a>无条件转移指令</h4><p>jmp</p>
<h4 id="条件转移指令-p89"><a href="#条件转移指令-p89" class="headerlink" title="条件转移指令(p89)"></a>条件转移指令(p89)</h4><p>jz/je<br>jnz<br>js<br>jns<br>jo<br>jno<br>jp/jpe<br>jnp/jpo<br>jb/jnae<br>jnb/jae/jnc</p>
<h4 id="循环指令"><a href="#循环指令" class="headerlink" title="循环指令"></a>循环指令</h4><h5 id="loop"><a href="#loop" class="headerlink" title="loop"></a>loop</h5><p>Count_Reg!=0</p>
<h5 id="loopz-loope"><a href="#loopz-loope" class="headerlink" title="loopz/loope"></a>loopz/loope</h5><p>Count_Reg!=0 &amp;&amp; zf=1</p>
<h5 id="loopnz-loopne"><a href="#loopnz-loopne" class="headerlink" title="loopnz/loopne"></a>loopnz/loopne</h5><p>Count_Reg!=0 &amp;&amp; zf=0</p>
<h4 id="子程序"><a href="#子程序" class="headerlink" title="子程序"></a>子程序</h4><h5 id="call"><a href="#call" class="headerlink" title="call"></a>call</h5><h5 id="ret"><a href="#ret" class="headerlink" title="ret"></a>ret</h5><h1 id="第8章-输入输出程序设计"><a href="#第8章-输入输出程序设计" class="headerlink" title="第8章 输入输出程序设计"></a>第8章 输入输出程序设计</h1><p>（面向考试复习）</p>
<h2 id="程序直接控制I-O方式-p283"><a href="#程序直接控制I-O方式-p283" class="headerlink" title="程序直接控制I/O方式(p283)"></a>程序直接控制I/O方式(p283)</h2><h3 id="I-O指令-p284"><a href="#I-O指令-p284" class="headerlink" title="I/O指令(p284)"></a>I/O指令(p284)</h3><p><strong>in和out</strong></p>
<p>in 完成I/O -&gt; CPU的信息传送<br>out完成CPU -&gt; I/O的信息传送</p>
<p>0~0ffh，即0~255端口可以这样写：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">;port是端口地址，一个8位的立即数</span><br><span class="line">in al,port   ;(al)&lt;-(port)</span><br><span class="line">in ax,port   ;(ax)&lt;-(port+1,port)</span><br><span class="line"></span><br><span class="line">out port,al  ;(port)&lt;-(al)</span><br><span class="line">out port,ax  ;(port+1,port)&lt;-(ax)</span><br></pre></td></tr></table></figure>
<p>0~0ffffh，即0~255端口可以这样写（当端口&gt;0ffh时，必须这样写！）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">;dx里存了端口地址</span><br><span class="line">in al,dx   ;(al)&lt;-((dx))</span><br><span class="line">in ax,dx   ;(ax)&lt;-((dx)+1,(dx))</span><br><span class="line"></span><br><span class="line">out dx,al  ;((dx))&lt;-(al)</span><br><span class="line">out dx,ax  ;((dx)+1,(dx))&lt;-(ax)</span><br></pre></td></tr></table></figure>
<p><span style="color:red">注意端口是否带“h”，例如126h是大于十进制的255的，就得用dx</span></p>
<p><strong>用法示例</strong></p>
<ol>
<li><p>把一个字，从端口地址28和29，传到存储器的字单元data_word中</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">in  ax,28h</span><br><span class="line">mov data_word,ax</span><br></pre></td></tr></table></figure>
</li>
<li><p>检测端口地址27h的第2位是否为1，如果1就是转到错误处理<br> 注意这里的第几位是从右到左从<span style="color:red">0</span>数起<br> 因为<code>test</code>就是只改变flags的and，所以用来查1</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">in   al,27h</span><br><span class="line">test al,00000100b</span><br><span class="line">jnz  error</span><br></pre></td></tr></table></figure>
</li>
<li><p>将端口地址为126h的命令寄存器，第7位置1</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mov dx,126h</span><br><span class="line">in  al,dx</span><br><span class="line">or  al,80h  ;80h=10000000b</span><br><span class="line">out dx,al</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="中断传送方式"><a href="#中断传送方式" class="headerlink" title="中断传送方式"></a>中断传送方式</h2><h3 id="8086的中断分类-p290"><a href="#8086的中断分类-p290" class="headerlink" title="8086的中断分类(p290)"></a>8086的中断分类(p290)</h3><p><strong>中断标志位if</strong></p>
<p>设置中断允许位(if=1)<code>sti</code> set interupt flag<br>清除中断允许位(if=0)<code>cli</code> clear interupt flag</p>
<p><strong>中断屏蔽寄存器（端口21h）</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>0</th>
</tr>
</thead>
<tbody>
<tr>
<td>打印机</td>
<td>软盘</td>
<td>硬盘</td>
<td>串行通信口1</td>
<td>串行通信口2</td>
<td>保留</td>
<td>键盘</td>
<td>定时器</td>
</tr>
</tbody>
</table>
</div>
<p><strong>中断屏蔽寄存器（端口20h）</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>0</th>
</tr>
</thead>
<tbody>
<tr>
<td>R</td>
<td>SL</td>
<td>EOI</td>
<td>0</td>
<td>0</td>
<td>L2</td>
<td>L1</td>
<td>L0</td>
</tr>
</tbody>
</table>
</div>
<p>扩充(实验书p92)：</p>
<p><strong>键盘的输入寄存器（PA，端口60h）</strong></p>
<table>
<tr>
<td>PB位7</td>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>0</th>
</tr>

<tr>
<td>PB7=1</td>
<td colspan="2">磁盘驱动器数</td>
<td colspan="2">显示器类型</td>
<td colspan="2">系统板上RAM数</td>
<td>未用</td>
<td>非磁盘系统</td>
</tr>
<tr>
<td>PB7=0</td>
<td colspan="8">键盘扫描码</td>
</tr>
</table>

<p><strong>控制寄存器（PB，端口61h）</strong></p>
<table>
<tr>
<tr><th>7</th>
<td>PA选源，1=键盘应答</td></tr>
<tr><th>6</th>
<td>0=禁止键盘时钟</td></tr>
<tr><th>5</th>
<td>0=允许由扩充槽的错误信号</td></tr>
<tr><th>4</th>
<td>0=允许ram</td></tr>
<tr><th>3</th>
<td>0=启开盒式带马达</td></tr>
<tr><th>2</th>
<td>PC0~3选源</td></tr>
<tr><th>1</th>
<td><span style="color:red">扬声器脉冲门</span></td></tr>
<tr><th>0</th>
<td><span style="color:red">定时器2与门</span></td></tr>
</table>

<p><strong>1ch中断一秒钟约产生18次中断，具体使用可以看2324期末卷最后一题</strong></p>
<h3 id="中断向量表-p293"><a href="#中断向量表-p293" class="headerlink" title="中断向量表(p293)"></a>中断向量表(p293)</h3><div class="table-container">
<table>
<thead>
<tr>
<th>功能</th>
<th>预置</th>
<th>执行</th>
<th>返回</th>
</tr>
</thead>
<tbody>
<tr>
<td>设置中断向量</td>
<td>ah=25h<br/>al=中断类型号<br/>ds:dx=中断向量</td>
<td>int 21h</td>
<td></td>
</tr>
<tr>
<td>取中断向量</td>
<td>ah=35h<br/>al=中断类型号</td>
<td>int 21h</td>
<td>es:bx=中断向量</td>
</tr>
</tbody>
</table>
</div>
<p>中断操作：</p>
<ol>
<li>取中断类型号</li>
<li>计算中断向量地址</li>
<li>取中断向量，偏移地址送IP，段地址送CS</li>
<li>转入中断处理程序</li>
<li>中断返回到int的下一条指令</li>
</ol>
<p><strong>使用dos功能调用存取中断向量，模板</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">;保存原来的中断向量</span><br><span class="line">mov  al,n   ;中断类型号</span><br><span class="line">mov  ah,35h ;取中断向量到es:bx</span><br><span class="line">int  21h</span><br><span class="line">push es</span><br><span class="line">push bx</span><br><span class="line">;设置新的中断向量</span><br><span class="line">push ds</span><br><span class="line">mov  ax,seg myfunc</span><br><span class="line">mov  ds,ax</span><br><span class="line">mov  dx,offset myfunc</span><br><span class="line">mov  al,n</span><br><span class="line">mov  al,25h</span><br><span class="line">int  21h</span><br><span class="line">pop  ds</span><br><span class="line">;重新设置原来的中断向量</span><br><span class="line">pop  dx    ;原来的bx</span><br><span class="line">pop  ds    ;原来的es</span><br><span class="line">mov  al,n</span><br><span class="line">mov  ah,25h</span><br><span class="line">int  21h</span><br><span class="line">ret</span><br><span class="line">;...</span><br><span class="line">myfunc proc near</span><br><span class="line">    ;...</span><br><span class="line">    iret</span><br><span class="line">myfunc endp</span><br><span class="line">;...</span><br></pre></td></tr></table></figure>
<p><span style="color:red">p300的程序可能会被改成考试题</span></p>
<h4 id="p301响铃程序"><a href="#p301响铃程序" class="headerlink" title="p301响铃程序"></a>p301响铃程序</h4><p>只有铃响：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">        mov    dx, 100h</span><br><span class="line">        in     al, 61h</span><br><span class="line">        and    al, 11111100b</span><br><span class="line">sound:  xor    al, 2</span><br><span class="line">        out    61h, al</span><br><span class="line">        mov    cx, 140h</span><br><span class="line">wait1:  loop   wait1</span><br><span class="line">        dec    dx</span><br><span class="line">        jne    sound</span><br></pre></td></tr></table></figure>
<p>完整程序：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">datarea segment</span><br><span class="line">    count   dw 1</span><br><span class="line">    msg     db &#x27;The bell is ringing&#x27;,0dh,0ah,&#x27;$&#x27;</span><br><span class="line">datarea ends</span><br><span class="line">prognam segment</span><br><span class="line">main proc far</span><br><span class="line">            assume cs:prognam,ds:datarea,es:datarea</span><br><span class="line">    start:  </span><br><span class="line">            push   ds</span><br><span class="line">            sub    ax,ax</span><br><span class="line">            push   ax</span><br><span class="line">            mov    ax,datarea</span><br><span class="line">            mov    ds,ax</span><br><span class="line">            mov    es,ax</span><br><span class="line"></span><br><span class="line">    ;保存旧的中断向量</span><br><span class="line">            mov    al,1ch                              ;1ch中断</span><br><span class="line">            mov    ah,35h                              ;取中断向量，保存在es:bx里</span><br><span class="line">            int    21h</span><br><span class="line">            push   bx</span><br><span class="line">            push   es</span><br><span class="line"></span><br><span class="line">    ;设置新的中断向量</span><br><span class="line">            push   ds</span><br><span class="line">            mov    dx,offset ring                      ;ring的偏移地址</span><br><span class="line">            mov    ax,seg ring                         ;ring的段地址</span><br><span class="line">            mov    ds,ax                               ;ds:dx=段地址:偏移地址</span><br><span class="line">            mov    al,1ch                              ;1ch中断</span><br><span class="line">            mov    ah,25h                              ;设置中断向量</span><br><span class="line">            int    21h</span><br><span class="line">            pop    ds</span><br><span class="line"></span><br><span class="line">    ;将21h端口的第0位清零,即打开定时器</span><br><span class="line">            in     al,21h</span><br><span class="line">            and    al,11111110b</span><br><span class="line">            out    21h,al</span><br><span class="line">            sti                                        ;设置中断标志，允许中断。</span><br><span class="line"></span><br><span class="line">    ;循环20000*30000次，因为次数太多一个寄存器装不下</span><br><span class="line">            mov    di,20000</span><br><span class="line">    delay:  </span><br><span class="line">            mov    si,30000</span><br><span class="line">    delay1: </span><br><span class="line">            dec    si</span><br><span class="line">            jnz    delay1</span><br><span class="line">            dec    di</span><br><span class="line">            jnz    delay</span><br><span class="line"></span><br><span class="line">    ;重新设置回旧的中断向量</span><br><span class="line">            pop    dx</span><br><span class="line">            pop    ds</span><br><span class="line">            mov    al,1ch</span><br><span class="line">            mov    ah,25h</span><br><span class="line">            int    21h</span><br><span class="line">            ret</span><br><span class="line">main endp</span><br><span class="line">ring proc near</span><br><span class="line">            push   ds</span><br><span class="line">            push   ax</span><br><span class="line">            push   cx</span><br><span class="line">            push   dx</span><br><span class="line"></span><br><span class="line">            mov    ax,datarea</span><br><span class="line">            mov    ds,ax</span><br><span class="line">            sti</span><br><span class="line"></span><br><span class="line">            dec    count</span><br><span class="line">            jnz    exit</span><br><span class="line">    ;打印消息&#x27;The bell is ringing&#x27;</span><br><span class="line">            mov    dx,offset msg</span><br><span class="line">            mov    ah,09h</span><br><span class="line">            int    21h</span><br><span class="line"></span><br><span class="line">            mov    dx,100                              ;打开关闭的次数</span><br><span class="line">            in     al,61h</span><br><span class="line">            and    al,0fch                             ;61h端口的第0、1位清0，分别是定时器2和扬声器脉冲门</span><br><span class="line">    sound:  </span><br><span class="line">            xor    al,02                               ;61h端口的第1位转置，扬声器脉冲门</span><br><span class="line">            out    61h,al</span><br><span class="line"></span><br><span class="line">    ;等待，因为cpu比端口快的多</span><br><span class="line">            mov    cx,1400h</span><br><span class="line">    wait1:  </span><br><span class="line">            loop   wait1</span><br><span class="line">            </span><br><span class="line">            dec    dx</span><br><span class="line">            jne    sound</span><br><span class="line">            mov    count,182                           ;10s的铃响delay</span><br><span class="line">    exit:   </span><br><span class="line">            cli</span><br><span class="line">            pop    dx</span><br><span class="line">            pop    cx</span><br><span class="line">            pop    ax</span><br><span class="line">            pop    ds</span><br><span class="line">            iret</span><br><span class="line">ring endp</span><br><span class="line">prognam ends</span><br><span class="line">    end start</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="堆栈情况"><a href="#堆栈情况" class="headerlink" title="堆栈情况"></a>堆栈情况</h1><p><img src="push_ds.png" alt="alt text"><br>堆栈段（SS）没有变化，始终保持为 076B。<br>堆栈指针（SP）在每次执行PUSH指令后减少2，这是因为每次PUSH操作都会将一个寄存器的值（2 字节）压入堆栈。</p>
<ol>
<li>一开始，sp初始化为0</li>
<li>push ds后，sp=0000h-2=0fffeh，压入ds=075Ch</li>
<li>sub ax,ax后，ax=0</li>
<li>push ax后，sp=0fffeh-2=0fffch，压入ax=0</li>
</ol>
<hr>
<h1 id="附录-DOS系统功能调用（常用）"><a href="#附录-DOS系统功能调用（常用）" class="headerlink" title="附录 DOS系统功能调用（常用）"></a>附录 DOS系统功能调用（常用）</h1><div class="table-container">
<table>
<thead>
<tr>
<th>AH</th>
<th>功能</th>
<th>调用参数</th>
<th>返回参数</th>
</tr>
</thead>
<tbody>
<tr>
<td>00</td>
<td>程序终止</td>
<td>CS=程序段前缀PSP</td>
<td></td>
</tr>
<tr>
<td>01</td>
<td>键盘输入并回显</td>
<td></td>
<td>AL=输入字符</td>
</tr>
<tr>
<td>02</td>
<td>显示输出</td>
<td>DL=输出字符</td>
<td></td>
</tr>
<tr>
<td>09</td>
<td>显示字符串</td>
<td>DS:DX=串地址 字符串以’$’结尾</td>
<td></td>
</tr>
<tr>
<td>0A</td>
<td>键盘输入到缓冲区</td>
<td>DS:DX=缓冲区首址 (DS:DX)=缓冲区最大字符数</td>
<td>(DS:DX+1)=实际输入的字符数</td>
</tr>
<tr>
<td>25</td>
<td>设置中断向量</td>
<td>DS：DX=中断向量<br>AL=中断类型号</td>
<td></td>
</tr>
<tr>
<td>35</td>
<td>取中断向量</td>
<td>AL=中断类型号</td>
<td>ES：BX=中断向量</td>
</tr>
</tbody>
</table>
</div>
<hr>
<h1 id="常用debug-实验书p186"><a href="#常用debug-实验书p186" class="headerlink" title="常用debug(实验书p186)"></a>常用debug(实验书p186)</h1><ul>
<li><code>-d</code>: 显示内存单元内容</li>
<li><code>-r</code>: 寄存器和标志位状态</li>
<li><code>-g</code>: 运行</li>
<li><code>-t</code>: 单步运行</li>
<li><code>-u</code>: 反汇编</li>
<li><code>-q</code>: 退出</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>标志名</th>
<th>置位</th>
<th>复位</th>
</tr>
</thead>
<tbody>
<tr>
<td>溢出Overflow</td>
<td>是OV</td>
<td>否NV</td>
</tr>
<tr>
<td>方向Direction</td>
<td>减量DN</td>
<td>增量UP</td>
</tr>
<tr>
<td>中断Interrupt</td>
<td>允许EI</td>
<td>屏蔽DI</td>
</tr>
<tr>
<td>符号Sign</td>
<td>负NG</td>
<td>正PL</td>
</tr>
<tr>
<td>零Zero</td>
<td>是ZR</td>
<td>否NZ</td>
</tr>
<tr>
<td>辅助进位Auxiliary Carry</td>
<td>是AC</td>
<td>否NA</td>
</tr>
<tr>
<td>奇偶Parity</td>
<td>偶PE</td>
<td>奇PO</td>
</tr>
<tr>
<td>进位Carry</td>
<td>是CY</td>
<td>否NC</td>
</tr>
</tbody>
</table>
</div>
<hr>
<h1 id="实验代码"><a href="#实验代码" class="headerlink" title="实验代码"></a>实验代码</h1><h2 id="成绩排名"><a href="#成绩排名" class="headerlink" title="成绩排名"></a>成绩排名</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">datarea segment</span><br><span class="line">    grade   dw 88,75,95,63,98,78,87,73,90,60</span><br><span class="line">    rank    dw 10 dup(?)</span><br><span class="line">datarea ends</span><br><span class="line">prognam segment</span><br><span class="line">main proc far</span><br><span class="line">               assume cs:prognam,ds:datarea,es:datarea</span><br><span class="line">    start:     </span><br><span class="line">               push   ds</span><br><span class="line">               sub    ax,ax</span><br><span class="line">               push   ax</span><br><span class="line">               mov    ax,datarea</span><br><span class="line">               mov    ds,ax</span><br><span class="line">               mov    es,ax</span><br><span class="line">               call   sort</span><br><span class="line">               call   output</span><br><span class="line">               ret</span><br><span class="line">main endp</span><br><span class="line">sort proc</span><br><span class="line">               mov    si,0</span><br><span class="line">               mov    cx,10</span><br><span class="line">    outer_loop:</span><br><span class="line">               push   cx</span><br><span class="line">               mov    cx,10</span><br><span class="line">               mov    dx,1</span><br><span class="line">               mov    ax,grade[si]</span><br><span class="line">               mov    di,offset grade</span><br><span class="line">    inner_loop:</span><br><span class="line">               cmp    ax,[di]</span><br><span class="line">               jge    no_add</span><br><span class="line">               inc    dx</span><br><span class="line">    no_add:    </span><br><span class="line">               add    di,2</span><br><span class="line">               loop   inner_loop</span><br><span class="line">               pop    cx</span><br><span class="line">               mov    rank[si],dx</span><br><span class="line">               add    si,2</span><br><span class="line">               loop   outer_loop</span><br><span class="line">               ret</span><br><span class="line">sort endp</span><br><span class="line">output proc</span><br><span class="line">               mov    cx,10</span><br><span class="line">               mov    si,0</span><br><span class="line">    t1:        </span><br><span class="line">               push   cx</span><br><span class="line">               mov    ax,rank[si]</span><br><span class="line">               call   print_dec</span><br><span class="line">               mov    dl,&#x27; &#x27;</span><br><span class="line">               call   putchar</span><br><span class="line">               pop    cx</span><br><span class="line">               add    si,2</span><br><span class="line">               loop   t1</span><br><span class="line">               ret</span><br><span class="line">output endp</span><br><span class="line">putchar proc</span><br><span class="line">               mov    ah,2</span><br><span class="line">               int    21h</span><br><span class="line">               ret</span><br><span class="line">putchar endp</span><br><span class="line">print_dec proc</span><br><span class="line">    ;ax/?=al...ah, result:al,ah</span><br><span class="line">               mov    bl,10</span><br><span class="line">               div    bl</span><br><span class="line">               mov    bx,ax</span><br><span class="line">               mov    dl,bl</span><br><span class="line">               add    dl,&#x27;0&#x27;</span><br><span class="line">               call   putchar</span><br><span class="line">               mov    dl,bh</span><br><span class="line">               add    dl,&#x27;0&#x27;</span><br><span class="line">               call   putchar</span><br><span class="line">               ret</span><br><span class="line">print_dec endp</span><br><span class="line">prognam ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h2 id="ASCII码表"><a href="#ASCII码表" class="headerlink" title="ASCII码表"></a>ASCII码表</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">datarea segment</span><br><span class="line">datarea ends</span><br><span class="line">prognam segment</span><br><span class="line">main proc far</span><br><span class="line">             assume ds:datarea,cs:prognam,es:datarea</span><br><span class="line">    start:   </span><br><span class="line">             push   ds</span><br><span class="line">             sub    ax,ax</span><br><span class="line">             push   ax</span><br><span class="line">             mov    ax,datarea</span><br><span class="line">             mov    ds,ax</span><br><span class="line">             mov    es,ax</span><br><span class="line"></span><br><span class="line">             mov    dx,10h</span><br><span class="line">             mov    bx,0</span><br><span class="line">    rotate:  </span><br><span class="line">             mov    ah,2</span><br><span class="line">             int    21h</span><br><span class="line">             inc    bx</span><br><span class="line">             inc    dx</span><br><span class="line">             push   dx</span><br><span class="line">             cmp    bx,16</span><br><span class="line">             mov    dl,&#x27; &#x27;</span><br><span class="line">             mov    ah,2</span><br><span class="line">             int    21h</span><br><span class="line">             jl     continue</span><br><span class="line">             xor    bx,bx</span><br><span class="line">             mov    dl,0dh</span><br><span class="line">             mov    ah,2</span><br><span class="line">             int    21h</span><br><span class="line">             mov    dl,0ah</span><br><span class="line">             mov    ah,2</span><br><span class="line">             int    21h</span><br><span class="line">    continue:</span><br><span class="line">             pop    dx</span><br><span class="line">             cmp    dx,100h</span><br><span class="line">             jl     rotate</span><br><span class="line">             ret</span><br><span class="line">main endp</span><br><span class="line">prognam ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h2 id="反转字符串"><a href="#反转字符串" class="headerlink" title="反转字符串"></a>反转字符串</h2><p>我流版</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">datarea segment</span><br><span class="line">    limit   db 30</span><br><span class="line">    len     db ?</span><br><span class="line">    str     db 30 dup(&#x27;$&#x27;)</span><br><span class="line">datarea ends</span><br><span class="line">prognam segment</span><br><span class="line">main proc far</span><br><span class="line">            assume cs:prognam,ds:datarea,es:datarea</span><br><span class="line">    start:  </span><br><span class="line">            push   ds</span><br><span class="line">            sub    ax,ax</span><br><span class="line">            push   ax</span><br><span class="line">            mov    ax,datarea</span><br><span class="line">            mov    ds,ax</span><br><span class="line">            mov    es,ax</span><br><span class="line"></span><br><span class="line">            ;输入字符串</span><br><span class="line">            lea    dx,limit</span><br><span class="line">            mov    ah,0ah</span><br><span class="line">            int    21h</span><br><span class="line">            ;回车换行</span><br><span class="line">            mov    dl,0dh</span><br><span class="line">            mov    ah,2</span><br><span class="line">            int    21h</span><br><span class="line">            mov    dl,0ah</span><br><span class="line">            mov    ah,2</span><br><span class="line">            int    21h</span><br><span class="line">            ;di置为字符串长度减一，cx计数器置为字符串长度除以2</span><br><span class="line">            mov    si,0</span><br><span class="line">            mov    bl,len</span><br><span class="line">            xor    bh,bh</span><br><span class="line">            mov    di,bx</span><br><span class="line">            dec    di</span><br><span class="line">            mov    cx,1</span><br><span class="line">            ;除以2</span><br><span class="line">            shr    bx,cl</span><br><span class="line">            mov    cx,bx</span><br><span class="line">    rotate: </span><br><span class="line">            mov    al,str[si]</span><br><span class="line">            mov    bl,str[di]</span><br><span class="line">            mov    str[si],bl</span><br><span class="line">            mov    str[di],al</span><br><span class="line">            inc    si</span><br><span class="line">            dec    di</span><br><span class="line">            loop   rotate</span><br><span class="line">            lea    dx,str</span><br><span class="line">            mov    ah,9</span><br><span class="line">            int    21h</span><br><span class="line">            ret</span><br><span class="line">main endp</span><br><span class="line">prognam ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<p>ppt递归版</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">datarea segment</span><br><span class="line">    str     db &quot;123456&quot;,&#x27;$&#x27;</span><br><span class="line">datarea ends</span><br><span class="line">prognam segment</span><br><span class="line">main proc far</span><br><span class="line">            assume cs:prognam,ds:datarea,es:datarea</span><br><span class="line">    start:  </span><br><span class="line">            push   ds</span><br><span class="line">            sub    ax,ax</span><br><span class="line">            push   ax</span><br><span class="line">            mov    ax,datarea</span><br><span class="line">            mov    ds,ax</span><br><span class="line">            mov    es,ax</span><br><span class="line"></span><br><span class="line">            mov    bx, offset str</span><br><span class="line">            push   bx</span><br><span class="line">            call   revers</span><br><span class="line">            pop    bx</span><br><span class="line">            mov    dl, [bx]</span><br><span class="line">            mov    ah, 2</span><br><span class="line">            int    21h</span><br><span class="line"></span><br><span class="line">            ret</span><br><span class="line">main endp</span><br><span class="line">revers proc  near</span><br><span class="line">            push   bp</span><br><span class="line">            mov    bp, sp</span><br><span class="line">            push   ax</span><br><span class="line">            push   bx</span><br><span class="line">            push   dx</span><br><span class="line">            mov    bx, [bp+4]</span><br><span class="line">            mov    al, [bx]</span><br><span class="line">            cmp    al, &#x27;$&#x27;</span><br><span class="line">            je     return</span><br><span class="line">    re_call:</span><br><span class="line">            inc    bx</span><br><span class="line">            push   bx</span><br><span class="line">            call   revers</span><br><span class="line">            pop    bx</span><br><span class="line">            mov    dl, [bx]</span><br><span class="line">            mov    ah, 2</span><br><span class="line">            int    21h</span><br><span class="line">    return: </span><br><span class="line">            pop    dx</span><br><span class="line">            pop    bx</span><br><span class="line">            pop    ax</span><br><span class="line">            pop    bp</span><br><span class="line">            ret</span><br><span class="line">revers endp</span><br><span class="line"></span><br><span class="line">prognam ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h2 id="查找子串位置，十进制、十六进制输出"><a href="#查找子串位置，十进制、十六进制输出" class="headerlink" title="查找子串位置，十进制、十六进制输出"></a>查找子串位置，十进制、十六进制输出</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line">datarea segment</span><br><span class="line">                 sentence_label label byte</span><br><span class="line">    sentence_max db             50</span><br><span class="line">    sentence_len db             ?</span><br><span class="line">    sentence     db             50 dup(&#x27;$&#x27;)</span><br><span class="line">                 key_label      label byte</span><br><span class="line">    key_max      db             30</span><br><span class="line">    key_len      db             ?</span><br><span class="line">    key          db             30 dup(&#x27;$&#x27;)</span><br><span class="line"></span><br><span class="line">    cmd1         db             &#x27;Input a sentence:&#x27;,&#x27;$&#x27;</span><br><span class="line">    cmd2         db             &#x27;Input a keyword:&#x27;,&#x27;$&#x27;</span><br><span class="line">    no_match_str db             &#x27;No match!&#x27;,0dh,0ah,&#x27;$&#x27;</span><br><span class="line">    match_str    db             &quot;The location:&quot;,&#x27;$&#x27;</span><br><span class="line">    crlf_str     db             0dh,0ah,&#x27;$&#x27;</span><br><span class="line"></span><br><span class="line">datarea ends</span><br><span class="line">prognam segment</span><br><span class="line">main proc far</span><br><span class="line">                 assume cs:prognam,ds:datarea,es:datarea</span><br><span class="line">    start:       </span><br><span class="line">                 push   ds</span><br><span class="line">                 sub    ax,ax</span><br><span class="line">                 push   ax</span><br><span class="line">                 mov    ax,datarea</span><br><span class="line">                 mov    ds,ax</span><br><span class="line">                 mov    es,ax</span><br><span class="line">    loops:       </span><br><span class="line">                 lea    dx,cmd1</span><br><span class="line">                 call   cout</span><br><span class="line">                 call   cin_sentence</span><br><span class="line">                 call   crlf</span><br><span class="line">                 cmp    sentence[0],3                       ;比较ctrl+c</span><br><span class="line">                 je     exit</span><br><span class="line">                 lea    dx,cmd2</span><br><span class="line">                 call   cout</span><br><span class="line">                 call   cin_key</span><br><span class="line">                 call   crlf</span><br><span class="line">                 call   compare</span><br><span class="line">                 jmp    loops</span><br><span class="line">    exit:        </span><br><span class="line">                 ret</span><br><span class="line">main endp</span><br><span class="line">cin proc</span><br><span class="line">                 mov    ah,0ah</span><br><span class="line">                 int    21h</span><br><span class="line">                 ret</span><br><span class="line">cin endp</span><br><span class="line">cin_sentence proc</span><br><span class="line">                 lea    dx,sentence_label</span><br><span class="line">                 call   cin</span><br><span class="line">                 ret</span><br><span class="line">cin_sentence endp</span><br><span class="line">cin_key proc</span><br><span class="line">                 lea    dx,key_label</span><br><span class="line">                 call   cin</span><br><span class="line">                 ret</span><br><span class="line">cin_key endp</span><br><span class="line">cout proc</span><br><span class="line">                 mov    ah,09h</span><br><span class="line">                 int    21h</span><br><span class="line">                 ret</span><br><span class="line">cout endp</span><br><span class="line">crlf proc</span><br><span class="line">                 lea    dx,crlf_str</span><br><span class="line">                 call   cout</span><br><span class="line">                 ret</span><br><span class="line">crlf endp</span><br><span class="line">compare proc</span><br><span class="line">    ;cx=sentence_len-key_len+1</span><br><span class="line">                 xor    ch,ch</span><br><span class="line">                 xor    dh,dh</span><br><span class="line">                 xor    bx,bx</span><br><span class="line">                 mov    cl,sentence_len</span><br><span class="line">                 mov    dl,sentence_len</span><br><span class="line">                 sub    cx,dx</span><br><span class="line">                 inc    cx</span><br><span class="line">    rotate:      </span><br><span class="line">                 lea    si,sentence[bx]</span><br><span class="line">                 lea    di,key</span><br><span class="line">                 mov    cl,key_len</span><br><span class="line">                 xor    ch,ch</span><br><span class="line">                 cld</span><br><span class="line">                 rep    cmpsb</span><br><span class="line">                 jz     match</span><br><span class="line">                 inc    bx</span><br><span class="line">                 loop   rotate</span><br><span class="line">    no_match:    </span><br><span class="line">                 lea    dx,no_match_str</span><br><span class="line">                 call   cout</span><br><span class="line">                 ret</span><br><span class="line">    match:       </span><br><span class="line">                 lea    dx,match_str</span><br><span class="line">                 call   cout</span><br><span class="line">                 call   print_dec</span><br><span class="line">                 call   crlf</span><br><span class="line"></span><br><span class="line">                 lea    dx,match_str</span><br><span class="line">                 call   cout</span><br><span class="line">                 call   print_hex</span><br><span class="line">                 call   crlf</span><br><span class="line"></span><br><span class="line">                 ret</span><br><span class="line">compare endp</span><br><span class="line">    ;打印十进制数字</span><br><span class="line">print_dec proc</span><br><span class="line">    ;ax/?=al...ah</span><br><span class="line">                 push   bx</span><br><span class="line">                 mov    ax,bx</span><br><span class="line">                 xor    cx,cx</span><br><span class="line">    div10:       </span><br><span class="line">                 mov    bl,10</span><br><span class="line">                 div    bl</span><br><span class="line">                 push   ax</span><br><span class="line">                 inc    cx</span><br><span class="line">                 xor    ah,ah</span><br><span class="line">                 cmp    al,0</span><br><span class="line">                 jne    div10</span><br><span class="line">    print10:     </span><br><span class="line">                 pop    dx</span><br><span class="line">                 mov    dl,dh</span><br><span class="line">                 add    dl,30h</span><br><span class="line">                 mov    ah,2</span><br><span class="line">                 int    21h</span><br><span class="line">                 loop   print10</span><br><span class="line">                 pop    bx</span><br><span class="line">                 ret</span><br><span class="line">print_dec endp</span><br><span class="line">    ;打印十六进制数字</span><br><span class="line">print_hex proc</span><br><span class="line">                 push   bx</span><br><span class="line">                 xor    ax,ax</span><br><span class="line">    div16:       </span><br><span class="line">                 mov    dx,0fh</span><br><span class="line">                 and    dx,bx</span><br><span class="line">                 push   dx</span><br><span class="line">                 inc    ax</span><br><span class="line">                 mov    cl,4</span><br><span class="line">                 shr    bx,cl</span><br><span class="line">                 cmp    bx,0</span><br><span class="line">                 jne    div16</span><br><span class="line">                 mov    cx,ax</span><br><span class="line">    print16:     </span><br><span class="line">                 pop    dx</span><br><span class="line">                 add    dx,&#x27;0&#x27;</span><br><span class="line">                 cmp    dx,&#x27;9&#x27;</span><br><span class="line">                 jle    not_letter</span><br><span class="line">                 add    dx,&#x27;A&#x27;-&#x27;0&#x27;-10</span><br><span class="line">    not_letter:  </span><br><span class="line">                 mov    ah,2</span><br><span class="line">                 int    21h</span><br><span class="line">                 loop   print16</span><br><span class="line">                 pop    bx</span><br><span class="line">                 ret</span><br><span class="line">print_hex endp</span><br><span class="line">prognam ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E6%B1%87%E7%BC%96/" rel="tag"># 汇编</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/11/04/cx-Freeze/" rel="prev" title="cx_Freeze:Python打包成可执行文件">
                  <i class="fa fa-angle-left"></i> cx_Freeze:Python打包成可执行文件
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2025/01/08/network_exam_note/" rel="next" title="计算机网络期末笔记">
                  计算机网络期末笔记 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Misaka-xxw</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">31k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">1:54</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/Misaka-xxw" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"misaka-xxw","repo":"misaka-xxw.github.io","client_id":"Ov23liNWqCyoWMWQ8Qrm","client_secret":"2972e4f4b47100b82f2aaf4023919d3f8d22b7cd","admin_user":"misaka-xxw","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"2943678e9ed3d304583b82b2735b5e4e"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
